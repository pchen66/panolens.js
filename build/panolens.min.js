THREE.DeviceOrientationControls=function(t){var e=this;this.object=t,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0;var i=function(t){e.deviceOrientation=t},n=function(){e.screenOrientation=window.orientation||0},o=function(){var t=new THREE.Vector3(0,0,1),e=new THREE.Euler,i=new THREE.Quaternion,n=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(o,r,a,s,h){e.set(a,r,-s,"YXZ"),o.setFromEuler(e),o.multiply(n),o.multiply(i.setFromAxisAngle(t,-h))}}();this.connect=function(){n(),window.addEventListener("orientationchange",n,!1),window.addEventListener("deviceorientation",i,!1),e.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",n,!1),window.removeEventListener("deviceorientation",i,!1),e.enabled=!1},this.update=function(){if(e.enabled!==!1){var t=e.deviceOrientation.alpha?THREE.Math.degToRad(e.deviceOrientation.alpha):0,i=e.deviceOrientation.beta?THREE.Math.degToRad(e.deviceOrientation.beta):0,n=e.deviceOrientation.gamma?THREE.Math.degToRad(e.deviceOrientation.gamma):0,r=e.screenOrientation?THREE.Math.degToRad(e.screenOrientation):0;o(e.object.quaternion,t,i,n,r)}},this.dispose=function(){this.disconnect()},this.connect()},THREE.CardboardEffect=function(t){var e=new THREE.OrthographicCamera(-1,1,1,-1,0,1),i=new THREE.Scene,n=new THREE.StereoCamera;n.aspect=.5;var o={minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat},r=new THREE.WebGLRenderTarget(512,512,o);r.scissorTest=!0;var a=new THREE.Vector2(.441,.156),s=new THREE.PlaneBufferGeometry(1,1,10,20).removeAttribute("normal").toNonIndexed(),h=s.attributes.position.array,c=s.attributes.uv.array,u=new Float32Array(2*h.length);u.set(h),u.set(h,h.length);var l=new Float32Array(2*c.length);l.set(c),l.set(c,c.length);for(var d=new THREE.Vector2,p=h.length/3,f=0,E=u.length/3;E>f;f++){d.x=u[3*f+0],d.y=u[3*f+1];var m=d.dot(d),g=1.5+(a.x+a.y*m)*m,y=p>f?0:1;u[3*f+0]=d.x/g*1.5-.5+y,u[3*f+1]=d.y/g*3,l[2*f]=.5*(l[2*f]+y)}s.attributes.position.array=u,s.attributes.uv.array=l;var v=new THREE.MeshBasicMaterial({map:r}),A=new THREE.Mesh(s,v);i.add(A),this.setSize=function(e,i){t.setSize(e,i);var n=t.getPixelRatio();r.setSize(e*n,i*n)},this.render=function(o,a){o.updateMatrixWorld(),null===a.parent&&a.updateMatrixWorld(),n.update(a);var s=r.width/2,h=r.height;r.scissor.set(0,0,s,h),r.viewport.set(0,0,s,h),t.render(o,n.cameraL,r),r.scissor.set(s,0,s,h),r.viewport.set(s,0,s,h),t.render(o,n.cameraR,r),t.render(i,e)}},function(){if("performance"in window==!1&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==!1){var t=window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:Date.now();window.performance.now=function(){return Date.now()-t}}}();var TWEEN=TWEEN||function(){var t=[];return{getAll:function(){return t},removeAll:function(){t=[]},add:function(e){t.push(e)},remove:function(e){var i=t.indexOf(e);-1!==i&&t.splice(i,1)},update:function(e){if(0===t.length)return!1;var i=0;for(e=void 0!==e?e:window.performance.now();i<t.length;)t[i].update(e)?i++:t.splice(i,1);return!0}}}();TWEEN.Tween=function(t){var e=t,i={},n={},o={},r=1e3,a=0,s=!1,h=!1,c=!1,u=0,l=null,d=TWEEN.Easing.Linear.None,p=TWEEN.Interpolation.Linear,f=[],E=null,m=!1,g=null,y=null,v=null;for(var A in t)i[A]=parseFloat(t[A],10);this.to=function(t,e){return void 0!==e&&(r=e),n=t,this},this.start=function(t){TWEEN.add(this),h=!0,m=!1,l=void 0!==t?t:window.performance.now(),l+=u;for(var r in n){if(n[r]instanceof Array){if(0===n[r].length)continue;n[r]=[e[r]].concat(n[r])}void 0!==i[r]&&(i[r]=e[r],i[r]instanceof Array==!1&&(i[r]*=1),o[r]=i[r]||0)}return this},this.stop=function(){return h?(TWEEN.remove(this),h=!1,null!==v&&v.call(e),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var t=0,e=f.length;e>t;t++)f[t].stop()},this.delay=function(t){return u=t,this},this.repeat=function(t){return a=t,this},this.yoyo=function(t){return s=t,this},this.easing=function(t){return d=t,this},this.interpolation=function(t){return p=t,this},this.chain=function(){return f=arguments,this},this.onStart=function(t){return E=t,this},this.onUpdate=function(t){return g=t,this},this.onComplete=function(t){return y=t,this},this.onStop=function(t){return v=t,this},this.update=function(t){var h,v,A;if(l>t)return!0;m===!1&&(null!==E&&E.call(e),m=!0),v=(t-l)/r,v=v>1?1:v,A=d(v);for(h in n)if(void 0!==i[h]){var N=i[h]||0,w=n[h];w instanceof Array?e[h]=p(w,A):("string"==typeof w&&(w=w.startsWith("+")||w.startsWith("-")?N+parseFloat(w,10):parseFloat(w,10)),"number"==typeof w&&(e[h]=N+(w-N)*A))}if(null!==g&&g.call(e,A),1===v){if(a>0){isFinite(a)&&a--;for(h in o){if("string"==typeof n[h]&&(o[h]=o[h]+parseFloat(n[h],10)),s){var L=o[h];o[h]=n[h],n[h]=L}i[h]=o[h]}return s&&(c=!c),l=t+u,!0}null!==y&&y.call(e);for(var M=0,b=f.length;b>M;M++)f[M].start(l+r);return!1}return!0}},TWEEN.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=n/4):e=n*Math.asin(1/i)/(2*Math.PI),-(i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)))},Out:function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=n/4):e=n*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/n)+1)},InOut:function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=n/4):e=n*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)):i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*.5+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-TWEEN.Easing.Bounce.Out(1-t)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return.5>t?.5*TWEEN.Easing.Bounce.In(2*t):.5*TWEEN.Easing.Bounce.Out(2*t-1)+.5}}},TWEEN.Interpolation={Linear:function(t,e){var i=t.length-1,n=i*e,o=Math.floor(n),r=TWEEN.Interpolation.Utils.Linear;return 0>e?r(t[0],t[1],n):e>1?r(t[i],t[i-1],i-n):r(t[o],t[o+1>i?i:o+1],n-o)},Bezier:function(t,e){for(var i=0,n=t.length-1,o=Math.pow,r=TWEEN.Interpolation.Utils.Bernstein,a=0;n>=a;a++)i+=o(1-e,n-a)*o(e,a)*t[a]*r(n,a);return i},CatmullRom:function(t,e){var i=t.length-1,n=i*e,o=Math.floor(n),r=TWEEN.Interpolation.Utils.CatmullRom;return t[0]===t[i]?(0>e&&(o=Math.floor(n=i*(1+e))),r(t[(o-1+i)%i],t[o],t[(o+1)%i],t[(o+2)%i],n-o)):0>e?t[0]-(r(t[0],t[0],t[1],t[1],-n)-t[0]):e>1?t[i]-(r(t[i],t[i],t[i-1],t[i-1],n-i)-t[i]):r(t[o?o-1:0],t[o],t[o+1>i?i:o+1],t[o+2>i?i:o+2],n-o)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(t,e){var i=TWEEN.Interpolation.Utils.Factorial;return i(t)/i(e)/i(t-e)},Factorial:function(){var t=[1];return function(e){var i=1;if(t[e])return t[e];for(var n=e;n>1;n--)i*=n;return t[e]=i,i}}(),CatmullRom:function(t,e,i,n,o){var r=.5*(i-t),a=.5*(n-e),s=o*o,h=o*s;return(2*e-2*i+r+a)*h+(-3*e+3*i-2*r-a)*s+r*o+e}}},function(t){"function"==typeof define&&define.amd?define([],function(){return TWEEN}):"undefined"!=typeof module&&"object"==typeof exports?module.exports=TWEEN:void 0!==t&&(t.TWEEN=TWEEN)}(this),THREE.OrbitControls=function(t,e){function i(){return 2*Math.PI/60/60*g.autoRotateSpeed}function n(){return Math.pow(.95,g.zoomSpeed)}function o(t){if(H=!1,f=E=0,g.enabled!==!1){if(t.preventDefault(),t.button===g.mouseButtons.ORBIT){if(g.noRotate===!0)return;z=U.ROTATE,v.set(t.clientX,t.clientY)}else if(t.button===g.mouseButtons.ZOOM){if(g.noZoom===!0)return;z=U.DOLLY,O.set(t.clientX,t.clientY)}else if(t.button===g.mouseButtons.PAN){if(g.noPan===!0)return;z=U.PAN,w.set(t.clientX,t.clientY)}z!==U.NONE&&(document.addEventListener("mousemove",r,!1),document.addEventListener("mouseup",a,!1),g.dispatchEvent(W))}}function r(t){if(g.enabled!==!1){t.preventDefault();var e=g.domElement===document?g.domElement.body:g.domElement;if(z===U.ROTATE){if(g.noRotate===!0)return;A.set(t.clientX,t.clientY),N.subVectors(A,v),g.rotateLeft(2*Math.PI*N.x/e.clientWidth*g.rotateSpeed),g.rotateUp(2*Math.PI*N.y/e.clientHeight*g.rotateSpeed),v.copy(A),m&&(f=t.clientX-m.clientX,E=t.clientY-m.clientY),m=t}else if(z===U.DOLLY){if(g.noZoom===!0)return;S.set(t.clientX,t.clientY),I.subVectors(S,O),I.y>0?g.dollyIn():I.y<0&&g.dollyOut(),O.copy(S)}else if(z===U.PAN){if(g.noPan===!0)return;L.set(t.clientX,t.clientY),M.subVectors(L,w),g.pan(M.x,M.y),w.copy(L)}z!==U.NONE&&g.update()}}function a(){H=!0,m=void 0,g.enabled!==!1&&(document.removeEventListener("mousemove",r,!1),document.removeEventListener("mouseup",a,!1),g.dispatchEvent(G),z=U.NONE)}function s(t){if(g.enabled!==!1&&g.noZoom!==!0&&z===U.NONE){t.preventDefault(),t.stopPropagation();var e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),e>0?(g.object.fov=g.object.fov<g.maxFov?g.object.fov+1:g.maxFov,g.object.updateProjectionMatrix()):0>e&&(g.object.fov=g.object.fov>g.minFov?g.object.fov-1:g.minFov,g.object.updateProjectionMatrix()),g.update(),g.dispatchEvent(W),g.dispatchEvent(G)}}function h(t){if(g.enabled!==!1&&g.noKeys!==!0&&g.noPan!==!0)switch(t.keyCode){case g.keys.UP:g.pan(0,g.keyPanSpeed),g.update();break;case g.keys.BOTTOM:g.pan(0,-g.keyPanSpeed),g.update();break;case g.keys.LEFT:g.pan(g.keyPanSpeed,0),g.update();break;case g.keys.RIGHT:g.pan(-g.keyPanSpeed,0),g.update()}}function c(t){if(H=!1,f=E=0,g.enabled!==!1){switch(t.touches.length){case 1:if(g.noRotate===!0)return;z=U.TOUCH_ROTATE,v.set(t.touches[0].pageX,t.touches[0].pageY);break;case 2:if(g.noZoom===!0)return;z=U.TOUCH_DOLLY;var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY;Math.sqrt(e*e+i*i);break;case 3:if(g.noPan===!0)return;z=U.TOUCH_PAN,w.set(t.touches[0].pageX,t.touches[0].pageY);break;default:z=U.NONE}z!==U.NONE&&g.dispatchEvent(W)}}function u(t){if(g.enabled!==!1){t.preventDefault(),t.stopPropagation();var e=g.domElement===document?g.domElement.body:g.domElement;switch(t.touches.length){case 1:if(g.noRotate===!0)return;if(z!==U.TOUCH_ROTATE)return;A.set(t.touches[0].pageX,t.touches[0].pageY),N.subVectors(A,v),g.rotateLeft(2*Math.PI*N.x/e.clientWidth*g.rotateSpeed),g.rotateUp(2*Math.PI*N.y/e.clientHeight*g.rotateSpeed),v.copy(A),m&&(f=t.touches[0].pageX-m.pageX,E=t.touches[0].pageY-m.pageY),m={pageX:t.touches[0].pageX,pageY:t.touches[0].pageY},g.update();break;case 2:if(g.noZoom===!0)return;if(z!==U.TOUCH_DOLLY)return;var i=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY;Math.sqrt(i*i+n*n);t.scale<1?(g.object.fov=g.object.fov<g.maxFov?g.object.fov+1:g.maxFov,g.object.updateProjectionMatrix()):t.scale>1&&(g.object.fov=g.object.fov>g.minFov?g.object.fov-1:g.minFov,g.object.updateProjectionMatrix()),g.update();break;case 3:if(g.noPan===!0)return;if(z!==U.TOUCH_PAN)return;L.set(t.touches[0].pageX,t.touches[0].pageY),M.subVectors(L,w),g.pan(M.x,M.y),w.copy(L),g.update();break;default:z=U.NONE}}}function l(){H=!0,m=void 0,g.enabled!==!1&&(g.dispatchEvent(G),z=U.NONE)}this.object=t,this.domElement=void 0!==e?e:document,this.enabled=!0,this.target=new THREE.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.noRotate=!1,this.rotateSpeed=-.15,this.noPan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.momentumDampingFactor=.9,this.momentumScalingFactor=-.005,this.minFov=30,this.maxFov=120,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT};var d,p,f,E,m,g=this,y=1e-6,v=new THREE.Vector2,A=new THREE.Vector2,N=new THREE.Vector2,w=new THREE.Vector2,L=new THREE.Vector2,M=new THREE.Vector2,b=new THREE.Vector3,T=new THREE.Vector3,O=new THREE.Vector2,S=new THREE.Vector2,I=new THREE.Vector2,P=0,R=0,x=1,j=new THREE.Vector3,C=new THREE.Vector3,D=new THREE.Quaternion,H=!1,U={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},z=U.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var V=(new THREE.Quaternion).setFromUnitVectors(t.up,new THREE.Vector3(0,1,0)),k=V.clone().inverse(),B={type:"change"},W={type:"start"},G={type:"end"};this.setLastQuaternion=function(t){D.copy(t),g.object.quaternion.copy(t)},this.getLastPosition=function(){return C},this.rotateLeft=function(t){void 0===t&&(t=i()),R-=t},this.rotateUp=function(t){void 0===t&&(t=i()),P-=t},this.panLeft=function(t){var e=this.object.matrix.elements;b.set(e[0],e[1],e[2]),b.multiplyScalar(-t),j.add(b)},this.panUp=function(t){var e=this.object.matrix.elements;b.set(e[4],e[5],e[6]),b.multiplyScalar(t),j.add(b)},this.pan=function(t,e){var i=g.domElement===document?g.domElement.body:g.domElement;if(g.object instanceof THREE.PerspectiveCamera){var n=g.object.position,o=n.clone().sub(g.target),r=o.length();r*=Math.tan(g.object.fov/2*Math.PI/180),g.panLeft(2*t*r/i.clientHeight),g.panUp(2*e*r/i.clientHeight)}else g.object instanceof THREE.OrthographicCamera?(g.panLeft(t*(g.object.right-g.object.left)/i.clientWidth),g.panUp(e*(g.object.top-g.object.bottom)/i.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.momentum=function(){if(H){if(Math.abs(E+f)<1e-4)return void(H=!1);E*=this.momentumDampingFactor,f*=this.momentumDampingFactor,R-=this.momentumScalingFactor*f,P-=this.momentumScalingFactor*E}},this.dollyIn=function(t){void 0===t&&(t=n()),g.object instanceof THREE.PerspectiveCamera?x/=t:g.object instanceof THREE.OrthographicCamera?(g.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*t)),g.object.updateProjectionMatrix(),g.dispatchEvent(B)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(t){void 0===t&&(t=n()),g.object instanceof THREE.PerspectiveCamera?x*=t:g.object instanceof THREE.OrthographicCamera?(g.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/t)),g.object.updateProjectionMatrix(),g.dispatchEvent(B)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.update=function(){var t=this.object.position;T.copy(t).sub(this.target),T.applyQuaternion(V),d=Math.atan2(T.x,T.z),p=Math.atan2(Math.sqrt(T.x*T.x+T.z*T.z),T.y),this.autoRotate&&z===U.NONE&&this.rotateLeft(i()),this.momentum(),d+=R,p+=P,d=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,d)),p=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,p)),p=Math.max(y,Math.min(Math.PI-y,p));var e=T.length()*x;e=Math.max(this.minDistance,Math.min(this.maxDistance,e)),this.target.add(j),T.x=e*Math.sin(p)*Math.sin(d),T.y=e*Math.cos(p),T.z=e*Math.sin(p)*Math.cos(d),T.applyQuaternion(k),t.copy(this.target).add(T),this.object.lookAt(this.target),R=0,P=0,x=1,j.set(0,0,0),(C.distanceToSquared(this.object.position)>y||8*(1-D.dot(this.object.quaternion))>y)&&(this.dispatchEvent(B),C.copy(this.object.position),D.copy(this.object.quaternion))},this.reset=function(){z=U.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(B),this.update()},this.getPolarAngle=function(){return p},this.getAzimuthalAngle=function(){return d},this.domElement.addEventListener("contextmenu",function(t){t.preventDefault()},!1),this.domElement.addEventListener("mousedown",o,!1),this.domElement.addEventListener("mousewheel",s,!1),this.domElement.addEventListener("DOMMouseScroll",s,!1),this.domElement.addEventListener("touchstart",c,!1),this.domElement.addEventListener("touchend",l,!1),this.domElement.addEventListener("touchmove",u,!1),window.addEventListener("keydown",h,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls;var GSVPANO=GSVPANO||{};GSVPANO.PanoLoader=function(t){"use strict";var e,i,n=t||{},o=new google.maps.StreetViewService,r=0,a=0,s=[],h=[],c=0,u=0,l="",d=[1,2,4,7,13,26],p=[1,1,2,4,7,13],f=[416,832,1664,3328,6656,13312],E=[416,416,832,1664,3328,6656],m=null;try{var g=document.createElement("canvas");m=g.getContext("experimental-webgl"),null==m&&(m=g.getContext("webgl"))}catch(y){}var v=1024,A=1024;if(m){var N=Math.max(m.getParameter(m.MAX_TEXTURE_SIZE),6656);v=A=N}this.setProgress=function(t,e){this.onProgress&&this.onProgress({loaded:t,total:e})},this.throwError=function(t){this.onError?this.onError(t):console.error(t)},this.adaptTextureToZoom=function(){var t=416*d[e],i=416*p[e];t=f[e],i=E[e],c=Math.ceil(t/v),u=Math.ceil(i/A),s=[],h=[];for(var n=0,o=0;u>o;o++)for(var r=0;c>r;r++){var a=document.createElement("canvas");c-1>r?a.width=v:a.width=t-v*r,u-1>o?a.height=A:a.height=i-A*o,s.push(a),h.push(a.getContext("2d")),n++}},this.composeFromTile=function(t,e,i){t*=512,e*=512;var n=Math.floor(t/v),o=Math.floor(e/A);t-=n*v,e-=o*A,h[o*c+n].drawImage(i,0,0,i.width,i.height,t,e,512,512),this.progress()},this.progress=function(){r++;Math.round(100*r/a);this.setProgress(r,a),r===a&&(this.canvas=s,this.panoId=i,this.zoom=e,this.onPanoramaLoad&&this.onPanoramaLoad(s[0]))},this.loadFromId=function(t){i=t,this.composePanorama()},this.composePanorama=function(){this.setProgress(0,1);var t,o,s,h=d[e],c=p[e],u=this;r=0,a=h*c;for(var u=this,s=0;c>s;s++)for(var o=0;h>o;o++){var t="https://cbks0.googleapis.com/cbk?output=tile&cb_client=maps_photos.ugc&v=4&gl=US&zoom="+e+"&x="+o+"&y="+s+"&panoid="+i;!function(e,i){if(n.useWebGL)var o=THREE.ImageUtils.loadTexture(t,null,function(){u.composeFromTile(e,i,o)});else{var r=new Image;r.addEventListener("load",function(){u.composeFromTile(e,i,this)}),r.crossOrigin="",r.src=t}}(o,s)}},this.load=function(t){var e=this;e.loadPano(t)},this.loadPano=function(t){var e=this;o.getPanoramaById(t,function(t,n){n===google.maps.StreetViewStatus.OK?(e.result=t,e.onPanoramaData&&e.onPanoramaData(t),l=t.copyright,e.copyright=t.copyright,i=t.location.pano,e.location=location,e.composePanorama()):(e.onNoPanoramaData&&e.onNoPanoramaData(n),e.throwError("Could not retrieve panorama for the following reason: "+n))})},this.setZoom=function(t){e=t,this.adaptTextureToZoom()},this.setZoom(n.zoom||1)},THREE.BendModifier=function(){},THREE.BendModifier.prototype={constructor:THREE.BendModifier,set:function(t,e,i){return this.direction=new THREE.Vector3,this.direction.copy(t),this.axis=new THREE.Vector3,this.axis.copy(e),this.angle=i,this},_sign:function(t){return 0>t?-1:t>0?1:0},_cosh:function(t){return(Math.exp(t)+Math.exp(-t))/2},_sinhInverse:function(t){return Math.log(Math.abs(t)+Math.sqrt(t*t+1))},modify:function(t){var e=new THREE.Vector3;e.crossVectors(this.direction,this.axis);var i=new THREE.Matrix4;i.set(e.x,e.y,e.z,0,this.direction.x,this.direction.y,this.direction.z,0,this.axis.x,this.axis.y,this.axis.z,0,0,0,0,1).transpose();for(var n=(new THREE.Matrix4).getInverse(i),o=[],r=[],a=[],s=0,h=0,c=0,u=0,l=0;l<t.vertices.length;l++)o[l]=new THREE.Vector3,o[l].copy(t.vertices[l]).applyMatrix4(n),o[l].x>s&&(s=o[l].x),o[l].x<h&&(h=o[l].x),o[l].y>c&&(c=o[l].y),o[l].y<u&&(u=o[l].y);for(var d=s-h,p=c-u,f=2*this._sinhInverse(Math.tan(this.angle))/d,E=(s+h)/2,m=(c+u)/2,l=0;l<t.vertices.length;l++)r[l]=new THREE.Vector3,r[l].copy(o[l]),o[l].x=1*this._sign(o[l].x-E)/f*this._sinhInverse((o[l].x-E)*f);var g=2/f*this._sinhInverse(d/2*f),y=2*this._sinhInverse(Math.tan(this.angle))/g,v=new THREE.Vector3(g/2,-p/2,0);v.y=1/y*this._cosh(y*v.x)-1/y-p/2;for(var A=new THREE.Vector3(0,v.y+v.x/Math.tan(this.angle),0),l=0;l<t.vertices.length;l++){var N=1*this._sign(r[l].x-E)/f*this._sinhInverse((r[l].x-E)*f),w=1/y*this._cosh(y*N)-1/y,L=new THREE.Vector3(A.x-N,A.y-(w-p/2),A.z).normalize(),M=new THREE.Vector3;M.addVectors(new THREE.Vector3(N,w-p/2,r[l].z),L.multiplyScalar(r[l].y+p/2)),o[l].x=M.x,o[l].y=M.y}for(var b=E*g/d,l=0;l<t.vertices.length;l++){var T=new THREE.Vector3(E,m,r[l].z),O=new THREE.Vector3;O.subVectors(r[l],T);var S=new THREE.Vector3;S.subVectors(o[l],T),a[l]=Math.acos(1/this._cosh(f*o[l].x))*this._sign(o[l].x),o[l].x=o[l].x+b,t.vertices[l].copy(o[l].applyMatrix4(i))}t.computeFaceNormals(),t.verticesNeedUpdate=!0,t.normalsNeedUpdate=!0;for(var I=["a","b","c","d"],P=0,R=t.faces.length;R>P;P++){var x=t.faces[P];if(void 0!==x.vertexNormals)for(var j=0,C=x.vertexNormals.length;C>j;j++){var D=a[x[I[j]]],H=this.axis.x,U=this.axis.y,z=this.axis.z,V=new THREE.Matrix3;V.set(Math.cos(D)+(1-Math.cos(D))*H*H,(1-Math.cos(D))*H*U-Math.sin(D)*z,(1-Math.cos(D))*H*z+Math.sin(D)*U,(1-Math.cos(D))*U*H+Math.sin(D)*z,Math.cos(D)+(1-Math.cos(D))*U*U,(1-Math.cos(D))*U*z-Math.sin(D)*H,(1-Math.cos(D))*z*H-Math.sin(D)*U,(1-Math.cos(D))*z*U+Math.sin(D)*H,Math.cos(D)+(1-Math.cos(D))*z*z),x.vertexNormals[j].applyMatrix3(V)}}return this}},window.PANOLENS={},function(){"use strict";PANOLENS.DataImage={Info:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTEzLDlIMTFWN0gxM00xMywxN0gxMVYxMUgxM00xMiwyQTEwLDEwIDAgMCwwIDIsMTJBMTAsMTAgMCAwLDAgMTIsMjJBMTAsMTAgMCAwLDAgMjIsMTJBMTAsMTAgMCAwLDAgMTIsMloiIC8+PC9zdmc+",Arrow:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTEyLDIyQTEwLDEwIDAgMCwxIDIsMTJBMTAsMTAgMCAwLDEgMTIsMkExMCwxMCAwIDAsMSAyMiwxMkExMCwxMCAwIDAsMSAxMiwyMk0xMiw3TDcsMTJIMTBWMTZIMTRWMTJIMTdMMTIsN1oiIC8+PC9zdmc+",FullscreenEnter:"data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KICAgIDxwYXRoIGQ9Ik03IDE0SDV2NWg1di0ySDd2LTN6bS0yLTRoMlY3aDNWNUg1djV6bTEyIDdoLTN2Mmg1di01aC0ydjN6TTE0IDV2MmgzdjNoMlY1aC01eiIvPgo8L3N2Zz4=",FullscreenLeave:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTE0LDE0SDE5VjE2SDE2VjE5SDE0VjE0TTUsMTRIMTBWMTlIOFYxNkg1VjE0TTgsNUgxMFYxMEg1VjhIOFY1TTE5LDhWMTBIMTRWNUgxNlY4SDE5WiIgLz48L3N2Zz4=",Orbit:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDYwIDYwIiBoZWlnaHQ9IjY0cHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA2MCA2MCIgd2lkdGg9IjY0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIGZpbGw9IiNmZmYiPjxnPjxnPjxwb2x5Z29uIHBvaW50cz0iNTYsMjUgNTMuNDM5LDI1IDU2LjY0MSwyOSA1MCwyOSA1MCwzMSA1Ni42MzksMzEgNTMuNDM5LDM1IDU2LDM1IDYwLDI5Ljk5OSAgICAiLz48cG9seWdvbiBwb2ludHM9IjQsMzUgNi41NjEsMzUgMy4zNTksMzEgMTAsMzEgMTAsMjkgMy4zNjEsMjkgNi41NjEsMjUgNCwyNSAwLDMwLjAwMSAgICAiLz48cG9seWdvbiBwb2ludHM9IjM1LDU2IDM1LDUzLjQzOCAzMSw1Ni42NCAzMSw1MCAyOSw1MCAyOSw1Ni42MzkgMjUsNTMuNDM4IDI1LDU2IDMwLjAwMiw2MCAgICAiLz48cG9seWdvbiBwb2ludHM9IjI1LDQgMjUsNi41NjIgMjksMy4zNTkgMjksMTAgMzEsMTAgMzEsMy4zNiAzNSw2LjU2MiAzNSw0IDI5Ljk5OCwwICAgICIvPjxnPjxwYXRoIGQ9Ik0zOC4wOTgsNDAuMTUyQzM3LjkyNCwyOC4xNjIsMzUuOTgyLDIzLDMwLDIzcy03LjkyNCw1LjE2Mi04LjA5OCwxNy4xNTJDMTguOTIsMzcuNzY5LDE3LDM0LjEwNiwxNywzMCAgICAgIGMwLTcuMTY5LDUuODMtMTMsMTMtMTNzMTMsNS44MzEsMTMsMTNDNDMsMzQuMTA2LDQxLjA4LDM3Ljc2OSwzOC4wOTgsNDAuMTUyIE0yOS45OCwzNC45ODhjLTYuMDE2LDAtNS4xMjctNy4zMS01LjEyNy03LjMxICAgICAgczEuMDI3LTIuMzE2LDUuMTI3LTIuMzE2YzQuMTAyLDAsNS4xNywyLjMxNiw1LjE3LDIuMzE2UzM1Ljk5NiwzNC45ODgsMjkuOTgsMzQuOTg4IE0zMCwxNWMtOC4yNzEsMC0xNSw2LjcyOS0xNSwxNSAgICAgIGMwLDguMjcxLDYuNzI5LDE1LDE1LDE1czE1LTYuNzI5LDE1LTE1QzQ1LDIxLjcyOSwzOC4yNzEsMTUsMzAsMTUiLz48L2c+PC9nPjwvZz48L3N2Zz4=",Gyro:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxOC4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNjRweCIgaGVpZ2h0PSI2NHB4IiB2aWV3Qm94PSIxMjAgMTIwIDI2MCAyNjAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDUwMCA1MDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGc+DQoJCTxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xOTUuNiwyNjAuMWMxLjksMi43LDUuMSw0LjYsOC42LDQuNmM0LjQsMCw4LjctMy40LDguNy04LjRjMC00LjgtNC04LjUtOS4xLTguNWMtMS45LDAtMy44LDAuNS01LjYsMS4zDQoJCQl2LTUuM2w4LjctMTAuM2gtMTUuNXYtOGgyOC4ydjUuM2wtOC40LDEwLjNjNi40LDIuNSwxMC43LDgsMTAuNywxNWMwLDkuOC03LjcsMTYuNC0xNy4zLDE2LjRjLTUuOCwwLTExLjMtMi42LTE1LjQtNy4yDQoJCQlMMTk1LjYsMjYwLjF6Ii8+DQoJCTxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0yNTMuOSwyMjUuNmwtOC43LDE0LjhoMC42YzguOCwwLDE2LjIsNi43LDE2LjIsMTZjMCw5LTcuNSwxNi4zLTE2LjUsMTYuM2MtOC43LDAtMTctNi4yLTE3LTE1LjgNCgkJCWMwLTQuNiwyLjEtOC43LDQuNi0xMi44bDEwLjktMTguNEgyNTMuOXogTTIzNy4xLDI1Ni44YzAsNC40LDMuNyw3LjksOC4yLDcuOWM0LjYsMCw3LjgtMy42LDcuOC04LjFjMC00LjQtMy4zLTguMy04LjMtOC4zDQoJCQljLTEuNywwLTMuMiwwLjMtNSwxLjFDMjM4LjcsMjUxLjIsMjM3LjEsMjUzLjcsMjM3LjEsMjU2Ljh6Ii8+DQoJCTxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0yODQuNiwyMjVjMTEuOSwwLDE2LjIsMTAuNywxNi4yLDIzLjljMCwxMy4yLTQuNCwyMy45LTE2LjIsMjMuOWMtMTEuOSwwLTE2LjItMTAuNy0xNi4yLTIzLjkNCgkJCUMyNjguMywyMzUuNiwyNzIuNywyMjUsMjg0LjYsMjI1eiBNMjg0LjYsMjMyLjljLTUuNCwwLTcuMyw3LjItNy4zLDE1LjljMCw4LjcsMS45LDE1LjksNy4zLDE1LjljNS40LDAsNy4zLTcuMiw3LjMtMTUuOQ0KCQkJQzI5MS44LDI0MC4xLDI4OS45LDIzMi45LDI4NC42LDIzMi45eiIvPg0KCQk8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMzE2LjQsMjIxLjZjNCwwLDcuMywzLjIsNy4zLDcuM2MwLDQtMy4yLDcuMy03LjMsNy4zYy00LDAtNy4zLTMuMi03LjMtNy4zDQoJCQlDMzA5LjEsMjI0LjksMzEyLjMsMjIxLjYsMzE2LjQsMjIxLjZ6IE0zMTYuNCwyMzAuOWMxLjEsMCwyLTAuOSwyLTJjMC0xLjEtMC45LTItMi0yYy0xLjEsMC0yLDAuOS0yLDINCgkJCUMzMTQuNCwyMzAuMSwzMTUuMywyMzAuOSwzMTYuNCwyMzAuOXoiLz4NCgk8L2c+DQoJPGc+DQoJCTxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0yNTAuNSwzNzYuNWMtNzAsMC0xMjctNTctMTI3LTEyN3M1Ny0xMjcsMTI3LTEyN2MyOC44LDAsNTYsOS40LDc4LjYsMjcuMmwtNy43LDkuOA0KCQkJYy0yMC40LTE2LTQ0LjktMjQuNS03MC44LTI0LjVDMTg3LjMsMTM1LDEzNiwxODYuMywxMzYsMjQ5LjVTMTg3LjMsMzY0LDI1MC41LDM2NGM2My4yLDAsMTE0LjUtNTEuNCwxMTQuNS0xMTQuNQ0KCQkJYzAtMjYuNy05LjQtNTIuNy0yNi41LTczLjNsOS42LThjMTguOSwyMi43LDI5LjQsNTEuNiwyOS40LDgxLjJDMzc3LjUsMzE5LjUsMzIwLjUsMzc2LjUsMjUwLjUsMzc2LjV6Ii8+DQoJCTxwb2x5Z29uIGZpbGw9IiNmZmYiIHBvaW50cz0iMzMxLjgsMTYwLjEgMzM1LjgsMTk4LjggMzY5LjcsMTcyLjYgCQkiLz4NCgk8L2c+DQo8L2c+DQo8L3N2Zz4NCg==",VideoPlay:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTgsNS4xNFYxOS4xNEwxOSwxMi4xNEw4LDUuMTRaIiAvPjwvc3ZnPg==",VideoPause:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTE0LDE5LjE0SDE4VjUuMTRIMTRNNiwxOS4xNEgxMFY1LjE0SDZWMTkuMTRaIiAvPjwvc3ZnPg==",Cardboard:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMjAuNzQgNkgzLjIxQzIuNTUgNiAyIDYuNTcgMiA3LjI4djEwLjQ0YzAgLjcuNTUgMS4yOCAxLjIzIDEuMjhoNC43OWMuNTIgMCAuOTYtLjMzIDEuMTQtLjc5bDEuNC0zLjQ4Yy4yMy0uNTkuNzktMS4wMSAxLjQ0LTEuMDFzMS4yMS40MiAxLjQ1IDEuMDFsMS4zOSAzLjQ4Yy4xOS40Ni42My43OSAxLjExLjc5aDQuNzljLjcxIDAgMS4yNi0uNTcgMS4yNi0xLjI4VjcuMjhjMC0uNy0uNTUtMS4yOC0xLjI2LTEuMjh6TTcuNSAxNC42MmMtMS4xNyAwLTIuMTMtLjk1LTIuMTMtMi4xMiAwLTEuMTcuOTYtMi4xMyAyLjEzLTIuMTMgMS4xOCAwIDIuMTIuOTYgMi4xMiAyLjEzcy0uOTUgMi4xMi0yLjEyIDIuMTJ6bTkgMGMtMS4xNyAwLTIuMTMtLjk1LTIuMTMtMi4xMiAwLTEuMTcuOTYtMi4xMyAyLjEzLTIuMTNzMi4xMi45NiAyLjEyIDIuMTMtLjk1IDIuMTItMi4xMiAyLjEyeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgyNHYyNEgwVjB6Ii8+Cjwvc3ZnPgo=",WhiteTile:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIABAMAAAAGVsnJAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB1WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KAtiABQAAACRQTFRFAAAAAAAABgYGBwcHHh4eKysrx8fHy8vLzMzM7OzsAAAABgYG+q7SZgAAAAp0Uk5TAP7+/v7+/v7+/iJx/a8AAAOwSURBVHja7d0hbsNAEAVQo6SFI6XEcALDcgNLvUBvEBQVhpkWVYWlhSsVFS7t5QIshRt695lEASZP+8c7a1kzDL1fz+/zyuvzp6FbvoddrL6uDd1yGZ5eXldeb18N3fIx7A+58prmhm65DfvDcd0952lu6JabFbD/zVprZj1lzcys+fj9z8xTZtbT8rv8yWlu6BYAIgAAAAAAAAAAAABAM6QXEAEAAAAAAAAAgJ2gnaAIiIA3Q2qAGgAAAAAAAAAAAAAAAAAAAAAAAAAAQJsADkVFAAAAAAA8Bj0GRUAEREAEREAEREAEREAEAAAAAAAAAAB2gnaCIiACPplRA9QANUAERAAAAEVQERQBERCBVlfAcZ3aeZobusUKMGBhV6KUElHGKBERJR6/fxExRkQZl9/lT8S1oVsuhqyYMmPKjCkzvfcCpsxohrwY0Q06EAEAAAAAAAAAAACgGdILiAAAAAAAAAAAwE7QTlAERMCbITVADQAAAAAAAAAAAAAAAAAAAAAAAAAAwKmwQ1ERAAAAAACPQY9BERABERABERABERABERABAAAAAAAAAICdoJ2gCIiAT2bUADVADRABEQAAQBFUBEVABERgEyvAlJm+V4ApM6bMmDJjyowpM6bMdN0LmDKjGfJiRDfoQAQAAAAAAAAAAACAZkgvIAIAAAAAAAAAADtBO0EREAFvhtQANQAAAAAAAAAAAAAAAAAAAAAAAAAAAKfCDkVFAAAAAAA8Bj0GRUAEREAEREAEREAEREAEAAAAAAAAAAB2gnaCIiACPplRA9QANUAERAAAAEVQERQBERCBTawAU2b6XgGmzJgyY8qMKTOmzJgy03UvYMqMZsiLEd2gAxEAAAAAAAAAAAAAmiG9gAgAAAAAAAAAAOwE7QRFQAS8GVID1AAAAAAAAAAAAAAAAAAAAAAAAAAAAJwKOxQVAQAAAADwGPQYFAEREAEREAEREAEREAERAAAAAAAAAADYCdoJioAI+GRGDVAD1AAREAEAABRBRVAEREAENrECTJnpewWYMmPKjCkzpsyYMmPKTNe9gCkzmiEvRnSDDkQAAAAAAAAAAAAAaIb0AiIAAAAAAAAAALATtBMUARHwZkgNUAMAAAAAAAAAAAAAAAAAAAAAAAAAAHAq7FBUBAAAAADAY9BjUAREQAREQAREQAREQAREAAAAAAAAAABgJ2gnKAIi4JMZNUANUANEQAQAAFAEFUEREAER2MQKMGWm7xVgyowpM50PWen9ugNGXz1XaocAFgAAAABJRU5ErkJggg==",
Reticle:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTEyLDIwQTgsOCAwIDAsMSA0LDEyQTgsOCAwIDAsMSAxMiw0QTgsOCAwIDAsMSAyMCwxMkE4LDggMCAwLDEgMTIsMjBNMTIsMkExMCwxMCAwIDAsMCAyLDEyQTEwLDEwIDAgMCwwIDEyLDIyQTEwLDEwIDAgMCwwIDIyLDEyQTEwLDEwIDAgMCwwIDEyLDJaIiAvPjwvc3ZnPg=="}}(),function(){"use strict";PANOLENS.Modes={UNKNOWN:0,NORMAL:1,VR:2}}(),function(){"use strict";PANOLENS.Utils={}}(),function(){"use strict";PANOLENS.Utils.ImageLoader={},PANOLENS.Utils.ImageLoader.checkDataURL=function(t){return!!t.match(/^\s*data:([a-z]+\/[a-z0-9\-\+]+(;[a-z\-]+\=[a-z0-9\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i)},PANOLENS.Utils.ImageLoader.load=function(t,e,i,n){function o(){e&&e(u)}var r,a,s,h,c,u;return r=THREE.Cache.get(t),void 0!==r?(e&&setTimeout(function(){i&&i({loaded:1,total:1}),e(r)},0),r):(c=window.URL||window.webkitURL,u=document.createElement("img"),THREE.Cache.add(t,u),this.checkDataURL(t)?(u.addEventListener("load",o,!1),u.src=t,u):(u.crossOrigin=void 0!==this.crossOrigin?this.crossOrigin:"",a=new XMLHttpRequest,a.responseType="arraybuffer",a.open("GET",t,!0),a.onprogress=function(t){t.lengthComputable&&i&&i({loaded:t.loaded,total:t.total})},a.onloadend=function(t){s=new Uint8Array(this.response),h=new Blob([s]),u.addEventListener("load",o,!1),u.src=c.createObjectURL(h)},void a.send(null)))},THREE.Cache.enabled=!0}(),function(){"use strict";PANOLENS.Utils.TextureLoader={},PANOLENS.Utils.TextureLoader.load=function(t,e,i,n){var o=new THREE.Texture;return PANOLENS.Utils.ImageLoader.load(t,function(t){o.image=t,o.needsUpdate=!0,e&&e(o)},i,n),o}}(),function(){"use strict";PANOLENS.Utils.CubeTextureLoader={},PANOLENS.Utils.CubeTextureLoader.load=function(t,e,i,n){var o,r,a,s,h;return o=new THREE.CubeTexture([]),r=0,a={},s={},t.map(function(t,c){PANOLENS.Utils.ImageLoader.load(t,function(t){o.images[c]=t,r++,6===r&&(o.needsUpdate=!0,e&&e(o))},function(t){a[c]={loaded:t.loaded,total:t.total},s.loaded=0,s.total=0,h=0;for(var e in a)h++,s.loaded+=a[e].loaded,s.total+=a[e].total;6>h&&(s.total=s.total/h*6),i&&i(s)},n)}),o}}(),function(){"use strict";PANOLENS.Panorama=function(t,e){THREE.Mesh.call(this),this.type="panorama",this.ImageQualityLow=1,this.ImageQualityFair=2,this.ImageQualityMedium=3,this.ImageQualityHigh=4,this.ImageQualitySuperHigh=5,this.animationDuration=500,this.defaultInfospotSize=350,this.container=void 0,this.loaded=!1,this.linkedSpots=[],this.isInfospotVisible=!1,this.linkingImageURL=void 0,this.linkingImageScale=void 0,this.geometry=t,this.material=e,this.material.side=THREE.DoubleSide,this.material.visible=!1,this.scale.x*=-1,this.orbitRadius=t.parameter&&t.parameter.radius?t.parameter.radius:100,this.addEventListener("load",this.fadeIn.bind(this)),this.addEventListener("panolens-container",this.setContainer.bind(this))},PANOLENS.Panorama.prototype=Object.create(THREE.Mesh.prototype),PANOLENS.Panorama.prototype.constructor=PANOLENS.Panorama,PANOLENS.Panorama.prototype.add=function(t){var e;if(arguments.length>1){for(var i=0;i<arguments.length;i++)this.add(arguments[i]);return this}t instanceof PANOLENS.Infospot?(e=t,t.dispatchEvent&&this.container&&t.dispatchEvent({type:"panolens-container",container:this.container})):(e=new THREE.Object3D,e.scale.x=-1,e.add(t)),THREE.Object3D.prototype.add.call(this,e)},PANOLENS.Panorama.prototype.load=function(){this.onLoad()},PANOLENS.Panorama.prototype.setContainer=function(t){var e;t instanceof HTMLElement?e=t:t&&t.container&&(e=t.container),e&&(this.children.forEach(function(t){t instanceof PANOLENS.Infospot&&t.dispatchEvent&&t.dispatchEvent({type:"panolens-container",container:e})}),this.container=e)},PANOLENS.Panorama.prototype.onLoad=function(){this.toggleInfospotVisibility(!0),this.loaded=!0,this.dispatchEvent({type:"load"})},PANOLENS.Panorama.prototype.onProgress=function(t){this.dispatchEvent({type:"progress",progress:t})},PANOLENS.Panorama.prototype.onError=function(){this.dispatchEvent({type:"error"})},PANOLENS.Panorama.prototype.getZoomLevel=function(){var t;return t=window.innerWidth<=800?this.ImageQualityFair:window.innerWidth>800&&window.innerWidth<=1280?this.ImageQualityMedium:window.innerWidth>1280&&window.innerWidth<=1920?this.ImageQualityHigh:window.innerWidth>1920?this.ImageQualitySuperHigh:this.ImageQualityLow},PANOLENS.Panorama.prototype.updateTexture=function(t){this.material.map=t,this.material.needsUpdate=!0},PANOLENS.Panorama.prototype.toggleInfospotVisibility=function(t,e){e=void 0!==e?e:0;var i,n;i=this,n=void 0!==t?t:this.isInfospotVisible?!1:!0,this.traverse(function(t){t instanceof PANOLENS.Infospot&&(n?t.show(e):t.hide(e))}),this.isInfospotVisible=n},PANOLENS.Panorama.prototype.setLinkingImage=function(t,e){this.linkingImageURL=t,this.linkingImageScale=e},PANOLENS.Panorama.prototype.link=function(t,e){var i,n,o,r,a=this;return this.visible=!0,n=new THREE.Raycaster,n.set(this.position,t.position.clone().sub(this.position).normalize()),o=n.intersectObject(this),o.length>0?(r=o[o.length-1].point.clone().multiplyScalar(.99),i=new PANOLENS.Infospot(void 0!==t.linkingImageScale?t.linkingImageScale:this.defaultInfospotSize,void 0!==t.linkingImageURL?t.linkingImageURL:PANOLENS.DataImage.Arrow),i.position.copy(r),i.toPanorama=t,i.addEventListener("click",function(){a.dispatchEvent({type:"panolens-viewer-handler",method:"setPanorama",data:t})}),this.linkedSpots.push(i),this.add(i),this.visible=!1,void(e||t.link(this,!0))):void console.warn("Panoramas should be at different position")},PANOLENS.Panorama.prototype.reset=function(){this.children.length=0},PANOLENS.Panorama.prototype.fadeIn=function(){new TWEEN.Tween(this.material).to({opacity:1},this.animationDuration).easing(TWEEN.Easing.Quartic.Out).start()},PANOLENS.Panorama.prototype.fadeOut=function(){new TWEEN.Tween(this.material).to({opacity:0},this.animationDuration).easing(TWEEN.Easing.Quartic.Out).start()},PANOLENS.Panorama.prototype.onEnter=function(){new TWEEN.Tween(this).to({},this.animationDuration).easing(TWEEN.Easing.Quartic.Out).onStart(function(){this.dispatchEvent({type:"enter-animation-start"}),this.loaded?(this.fadeIn(),this.toggleInfospotVisibility(!0,this.animationDuration)):this.load(),this.visible=!0,this.material.visible=!0}).delay(this.animationDuration).start(),this.dispatchEvent({type:"enter"})},PANOLENS.Panorama.prototype.onLeave=function(){new TWEEN.Tween(this).to({},this.animationDuration).easing(TWEEN.Easing.Quartic.Out).onStart(function(){this.fadeOut(),this.toggleInfospotVisibility(!1)}).onComplete(function(){this.visible=!1,this.material.visible=!0}).start(),this.dispatchEvent({type:"leave"})},PANOLENS.Panorama.prototype.dispose=function(){function t(e){for(var i=e.children.length-1;i>=0;i--)t(e.children[i]),e.remove(e.children[i]);e instanceof PANOLENS.Infospot&&e.dispose(),e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}t(this),this.parent&&this.parent.remove(this)}}(),function(){"use strict";PANOLENS.ImagePanorama=function(t,e){e=e||5e3;var i=new THREE.SphereGeometry(e,60,40),n=new THREE.MeshBasicMaterial({opacity:0,transparent:!0});PANOLENS.Panorama.call(this,i,n),this.src=t},PANOLENS.ImagePanorama.prototype=Object.create(PANOLENS.Panorama.prototype),PANOLENS.ImagePanorama.prototype.constructor=PANOLENS.ImagePanorama,PANOLENS.ImagePanorama.prototype.load=function(t){return(t=t||this.src)?void("string"==typeof t?PANOLENS.Utils.TextureLoader.load(t,this.onLoad.bind(this),this.onProgress.bind(this),this.onError.bind(this)):t instanceof HTMLImageElement&&this.onLoad(new THREE.Texture(t))):void console.warn("Image source undefined")},PANOLENS.ImagePanorama.prototype.onLoad=function(t){t.minFilter=t.maxFilter=THREE.LinearFilter,t.needsUpdate=!0,this.updateTexture(t),PANOLENS.Panorama.prototype.onLoad.call(this)},PANOLENS.ImagePanorama.prototype.reset=function(){PANOLENS.Panorama.prototype.reset.call(this)}}(),function(){"use strict";PANOLENS.GoogleStreetviewPanorama=function(t,e){PANOLENS.ImagePanorama.call(this,void 0,e),this.panoId=t,this.gsvLoader=void 0,this.setupGoogleMapAPI()},PANOLENS.GoogleStreetviewPanorama.prototype=Object.create(PANOLENS.ImagePanorama.prototype),PANOLENS.GoogleStreetviewPanorama.constructor=PANOLENS.GoogleStreetviewPanorama,PANOLENS.GoogleStreetviewPanorama.prototype.load=function(t){t=t||this.panoId||{},t&&this.gsvLoader?this.loadGSVLoader(t):this.gsvLoader={}},PANOLENS.GoogleStreetviewPanorama.prototype.setupGoogleMapAPI=function(){var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js",t.onreadystatechange=this.setGSVLoader.bind(this),t.onload=this.setGSVLoader.bind(this),document.getElementsByTagName("head")[0].appendChild(t)},PANOLENS.GoogleStreetviewPanorama.prototype.setGSVLoader=function(){this.gsvLoader=new GSVPANO.PanoLoader,this.gsvLoader==={}&&this.load()},PANOLENS.GoogleStreetviewPanorama.prototype.getGSVLoader=function(){return this.gsvLoader},PANOLENS.GoogleStreetviewPanorama.prototype.loadGSVLoader=function(t){this.gsvLoader.onProgress=this.onProgress.bind(this),this.gsvLoader.onPanoramaLoad=this.onLoad.bind(this),this.gsvLoader.setZoom(this.getZoomLevel()),this.gsvLoader.load(t),this.gsvLoader.loaded=!0},PANOLENS.GoogleStreetviewPanorama.prototype.onLoad=function(t){this.gsvLoader&&PANOLENS.ImagePanorama.prototype.onLoad.call(this,new THREE.Texture(t))},PANOLENS.GoogleStreetviewPanorama.prototype.reset=function(){this.gsvLoader=void 0,PANOLENS.ImagePanorama.prototype.reset.call(this)}}(),function(){"use strict";PANOLENS.CubePanorama=function(t,e){var i,n,o;this.images=t||[],this.orbitRadius=e/2,e=e||1e4,i=JSON.parse(JSON.stringify(THREE.ShaderLib.cube)),n=new THREE.BoxGeometry(e,e,e),o=new THREE.ShaderMaterial({fragmentShader:i.fragmentShader,vertexShader:i.vertexShader,uniforms:i.uniforms,side:THREE.BackSide}),PANOLENS.Panorama.call(this,n,o)},PANOLENS.CubePanorama.prototype=Object.create(PANOLENS.Panorama.prototype),PANOLENS.CubePanorama.prototype.constructor=PANOLENS.CubePanorama,PANOLENS.CubePanorama.prototype.load=function(){PANOLENS.Utils.CubeTextureLoader.load(this.images,this.onLoad.bind(this),this.onProgress.bind(this),this.onError.bind(this))},PANOLENS.CubePanorama.prototype.onLoad=function(t){this.material.uniforms.tCube.value=t,PANOLENS.Panorama.prototype.onLoad.call(this)}}(),function(){"use strict";PANOLENS.BasicPanorama=function(t){var e=PANOLENS.DataImage.WhiteTile;PANOLENS.CubePanorama.call(this,[e,e,e,e,e,e],t)},PANOLENS.BasicPanorama.prototype=Object.create(PANOLENS.CubePanorama.prototype),PANOLENS.BasicPanorama.prototype.constructor=PANOLENS.BasicPanorama}(),function(){"use strict";PANOLENS.VideoPanorama=function(t,e,i){i=i||5e3;var n=new THREE.SphereGeometry(i,60,40),o=new THREE.MeshBasicMaterial({opacity:0,transparent:!0});PANOLENS.Panorama.call(this,n,o),this.src=t,this.options=e,this.videoElement=void 0,this.videoCanvas=void 0,this.videoRenderObject=void 0,this.videoFramerate=30,this.isIOS=/iPhone|iPad|iPod/i.test(navigator.userAgent),this.addEventListener("leave",this.pauseVideo.bind(this)),this.addEventListener("leave",this.resetVideo.bind(this)),this.addEventListener("video-toggle",this.toggleVideo.bind(this)),this.addEventListener("video-time",this.setVideoCurrentTime.bind(this))},PANOLENS.VideoPanorama.prototype=Object.create(PANOLENS.Panorama.prototype),PANOLENS.VideoPanorama.constructor=PANOLENS.VideoPanorama,PANOLENS.VideoPanorama.prototype.load=function(t,e){var i=this;t=t||this.src||"",e=e||this.options||{},this.videoElement=e.videoElement||document.createElement("video"),this.videoCanvas=e.videoCanvas||document.createElement("canvas"),this.videoElement.muted=e.muted||!1,this.videoElement.loop=void 0!==e.loop?e.loop:!0,this.videoElement.src=t,this.videoElement.load(),this.videoElement.onloadeddata=function(){i.setVideoTexture(i.videoElement,i.videoCanvas),i.onLoad()},this.videoElement.ontimeupdate=function(t){i.dispatchEvent({type:"panolens-viewer-handler",method:"onVideoUpdate",data:this.currentTime/this.duration})}},PANOLENS.VideoPanorama.prototype.setVideoTexture=function(t,e){var i,n,o,r;t&&e&&(e.width=t.videoWidth,e.height=t.videoHeight,o=e.getContext("2d"),i=new THREE.Texture(e),i.minFilter=THREE.LinearFilter,i.maxFilter=THREE.LinearFilter,n={video:t,videoContext:o,videoTexture:i,target:this},this.isIOS?(n.fps=this.videoFramerate,n.lastTime=Date.now(),n.video.pano_paused=!0,n.video.play=function(){n.lastTime=Date.now(),this.pano_paused=!1},n.video.pause=function(){this.pano_paused=!0},r=function(){if(!this.video.pano_paused){var t=Date.now(),e=(t-this.lastTime)/1e3;this.video&&e>=1e3/this.fps/1e3&&(this.video.currentTime+e>=this.video.duration?this.video.currentTime=0:this.video.currentTime=this.video.currentTime+e,this.videoContext.drawImage(this.video,0,0,this.video.videoWidth,this.video.videoHeight),this.videoTexture.needsUpdate=!0,this.lastTime=t)}}):r=function(){this.video.readyState===this.video.HAVE_ENOUGH_DATA&&(this.videoContext.drawImage(this.video,0,0),this.videoTexture&&(this.videoTexture.needsUpdate=!0))},o.drawImage(t,0,0),i.needsUpdate=!0,this.updateTexture(i),this.videoRenderObject=n,this.dispatchEvent({type:"panolens-viewer-handler",method:"addUpdateCallback",data:r.bind(n)}))},PANOLENS.VideoPanorama.prototype.reset=function(){this.videoElement=void 0,this.videoCanvas=void 0,PANOLENS.Panorama.prototype.reset.call(this)},PANOLENS.VideoPanorama.prototype.isVideoPaused=function(){return this.isIOS?this.videoRenderObject.video.pano_paused:this.videoRenderObject.video.paused},PANOLENS.VideoPanorama.prototype.toggleVideo=function(){this.videoRenderObject&&this.videoRenderObject.video&&(this.isVideoPaused()?this.videoRenderObject.video.play():this.videoRenderObject.video.pause())},PANOLENS.VideoPanorama.prototype.setVideoCurrentTime=function(t){this.videoRenderObject&&this.videoRenderObject.video&&1!==t.percentage&&(this.videoRenderObject.video.currentTime=this.videoRenderObject.video.duration*t.percentage)},PANOLENS.VideoPanorama.prototype.playVideo=function(){this.videoRenderObject&&this.videoRenderObject.video&&this.isVideoPaused()&&this.videoRenderObject.video.play()},PANOLENS.VideoPanorama.prototype.pauseVideo=function(){this.videoRenderObject&&this.videoRenderObject.video&&!this.isVideoPaused()&&this.videoRenderObject.video.pause()},PANOLENS.VideoPanorama.prototype.resetVideo=function(){this.videoRenderObject&&this.videoRenderObject.video&&this.setVideoCurrentTime({percentage:0})}}(),function(){"use strict";PANOLENS.EmptyPanorama=function(t){t=t||5e3;var e=new THREE.Geometry,i=new THREE.MeshBasicMaterial({color:0,opacity:1,transparent:!0});PANOLENS.Panorama.call(this,e,i)},PANOLENS.EmptyPanorama.prototype=Object.create(PANOLENS.Panorama.prototype),PANOLENS.EmptyPanorama.prototype.constructor=PANOLENS.EmptyPanorama}(),function(){PANOLENS.Reticle=function(t,e){var i,n;t=t||16777215,e=e||PANOLENS.DataImage.Reticle,i=PANOLENS.Utils.TextureLoader.load(e),n=new THREE.SpriteMaterial({map:i,color:t,depthTest:!1}),THREE.Sprite.call(this,n),this.visible=!1,this.renderOrder=10},PANOLENS.Reticle.prototype=Object.create(THREE.Sprite.prototype),PANOLENS.Reticle.prototype.constructor=PANOLENS.Reticle,PANOLENS.Reticle.prototype.show=function(){this.visible=!0},PANOLENS.Reticle.prototype.hide=function(){this.visible=!1}}(),function(){PANOLENS.Tile=function(t,e,i,n,o,r,a){this.parameters={width:t,height:e,widthSegments:i,heightSegments:n,forceDirection:o,forceAxis:r,forceAngle:a},t=t||10,e=e||5,i=i||1,n=n||1,o=o||new THREE.Vector3(0,0,1),r=r||new THREE.Vector3(0,1,0),a=void 0!==a?a:0,THREE.Mesh.call(this,new THREE.PlaneGeometry(t,e,i,n),new THREE.MeshBasicMaterial({color:16777215,transparent:!0})),this.bendModifier=new THREE.BendModifier,this.entity=void 0,this.animationDuration=500,this.animationFadeOut=void 0,this.animationFadeIn=void 0,this.animationTranslation=void 0,this.tweens={},0!==a&&this.bend(o,r,a),this.originalGeometry=this.geometry.clone()},PANOLENS.Tile.prototype=Object.create(THREE.Mesh.prototype),PANOLENS.Tile.prototype.constructor=PANOLENS.Tile,PANOLENS.Tile.prototype.clone=function(){var t,e=this.parameters;return t=new PANOLENS.Tile(e.width,e.height,e.widthSegments,e.heightSegments,e.forceDirection,e.forceAxis,e.forceAngle),t.setEntity(this.entity),t.material=this.material.clone(),t},PANOLENS.Tile.prototype.bend=function(t,e,i){this.bendModifier.set(t,e,i).modify(this.geometry)},PANOLENS.Tile.prototype.unbend=function(){var t=this.geometry;this.geometry=this.originalGeometry,this.originalGeometry=this.geometry.clone(),t.dispose(),t=null},PANOLENS.Tile.prototype.tween=function(t,e,i,n,o,r,a,s,h){return e=e||this,i=i||{},n=n||this.animationDuration,o=o||TWEEN.Easing.Exponential.Out,r=void 0!==r?r:0,a=a?a:null,s=s?s:null,h=h?h:null,this.tweens[t]||(this.tweens[t]=new TWEEN.Tween(e).to(i,n).easing(o).delay(r).onStart(a).onUpdate(s).onComplete(h)),this.tweens[t]},PANOLENS.Tile.prototype.ripple=function(t,e,i){t=t||2,e=e||200,i=i||TWEEN.Easing.Cubic.Out;var n=this,o=this.clone();new TWEEN.Tween(o.scale).to({x:t,y:t},e).easing(i).start(),new TWEEN.Tween(o.material).to({opacity:0},e).easing(i).onComplete(function(){n.remove(o),o.geometry.dispose(),o.material.dispose()}).start(),this.add(o)},PANOLENS.Tile.prototype.setEntity=function(t){this.entity=t}}(),function(){"use strict";PANOLENS.TileGroup=function(t,e,i,n,o){var r=this;THREE.Object3D.call(this),this.tileArray=t||[],this.offset=void 0!==o?o:0,this.v_gap=void 0!==e?e:6,this.d_gap=void 0!==i?i:2,this.animationDuration=void 0!==n?n:200,this.animationEasing=TWEEN.Easing.Exponential.Out,this.visibleDelta=2,this.tileArray.map(function(t,e){t.image&&PANOLENS.Utils.TextureLoader.load(t.image,r.setTexture.bind(t)),t.position.set(0,e*-r.v_gap,e*-r.d_gap),t.originalPosition=t.position.clone(),t.setEntity(r),r.add(t)}),this.updateVisbility()},PANOLENS.TileGroup.prototype=Object.create(THREE.Object3D.prototype),PANOLENS.TileGroup.prototype.constructor=PANOLENS.TileGroup,PANOLENS.TileGroup.prototype.updateTexture=function(t){var e=this;t=t||[],this.children.map(function(i,n){i instanceof PANOLENS.Tile&&t[n]&&(PANOLENS.Utils.TextureLoader.load(t[n],e.setTexture.bind(i)),i.outline&&(i.outline.material.visible=!0))})},PANOLENS.TileGroup.prototype.updateAllTexture=function(t){if(this.updateTexture(t),t.length<this.children.length)for(var e=t.length;e<this.children.length;e++)this.children[e]instanceof PANOLENS.Tile&&(this.children[e].material.visible=!1,this.children[e].outline&&(this.children[e].outline.material.visible=!1))},PANOLENS.TileGroup.prototype.setTexture=function(t){t.minFilter=THREE.LinearFilter,t.magFilter=THREE.LinearFilter,this.material.visible=!0,this.material.map=t,this.material.needsUpdate=!0},PANOLENS.TileGroup.prototype.updateVisbility=function(){this.children[this.offset].visible=!0,new TWEEN.Tween(this.children[this.offset].material).to({opacity:1},this.animationDuration).easing(this.animationEasing).start(),this.children[this.offset].outline&&(this.children[this.offset].outline.visible=!0);for(var t=this.offset-1;t>=0;t--)-1!==this.tileArray.indexOf(this.children[t])&&(this.offset-t<=this.visibleDelta?(this.children[t].visible=!0,new TWEEN.Tween(this.children[t].material).to({opacity:1/(this.offset-t)*.5},this.animationDuration).easing(this.animationEasing).start()):this.children[t].visible=!1,this.children[t].outline&&(this.children[t].outline.visible=!1));for(var t=this.offset+1;t<this.children.length;t++)-1!==this.tileArray.indexOf(this.children[t])&&(t-this.offset<=this.visibleDelta?(this.children[t].visible=!0,new TWEEN.Tween(this.children[t].material).to({opacity:1/(t-this.offset)*.5},this.animationDuration).easing(this.animationEasing).start()):this.children[t].visible=!1,this.children[t].outline&&(this.children[t].outline.visible=!1))},PANOLENS.TileGroup.prototype.scrollUp=function(t){var e,i=this.tileArray;if(t=void 0!==t?t:this.animationDuration,e=this.offset+1,this.offset<i.length-1&&i[this.offset+1].material.visible){for(var n=i.length-1;n>=0;n--)new TWEEN.Tween(i[n].position).to({y:(n-e)*-this.v_gap,z:Math.abs(n-e)*-this.d_gap},t).easing(this.animationEasing).start();this.offset++,this.updateVisbility(),this.dispatchEvent({type:"scroll",direction:"up"})}},PANOLENS.TileGroup.prototype.scrollDown=function(t){var e,i=this.tileArray;if(t=void 0!==t?t:this.animationDuration,e=this.offset-1,this.offset>0&&i[this.offset-1].material.visible){for(var n=0;n<i.length;n++)new TWEEN.Tween(i[n].position).to({y:(n-e)*-this.v_gap,z:Math.abs(n-e)*-this.d_gap},t).easing(this.animationEasing).start();this.offset--,this.updateVisbility(),this.dispatchEvent({type:"scroll",direction:"down"})}},PANOLENS.TileGroup.prototype.reset=function(){this.tileArray.map(function(t,e){t.position.copy(t.originalPosition)}),this.offset=0,this.updateVisbility()},PANOLENS.TileGroup.prototype.getIndex=function(){return this.offset},PANOLENS.TileGroup.prototype.getTileCount=function(){var t=0;return this.tileArray.map(function(e){e.material.visible&&t++}),t}}(),function(){"use strict";var t,e,i=[];PANOLENS.SpriteText=function(t,e,i,n,o){THREE.Object3D.call(this),this.text=t||"",this.maxWidth=e||2e3,this.color=i||16777215,this.opacity=void 0!==n?n:1,this.options=o||{},this.animationDuration=500,this.animationFadeOut=void 0,this.animationFadeIn=void 0,this.tweens={},this.addText(t)},PANOLENS.SpriteText.prototype=Object.create(THREE.Object3D.prototype),PANOLENS.SpriteText.prototype.constructor=PANOLENS.SpriteText,PANOLENS.SpriteText.prototype.generateTextGeometry=function(){},PANOLENS.SpriteText.prototype.generateSDFShader=function(){},PANOLENS.SpriteText.prototype.setBMFont=function(n,o,r){r.needsUpdate=!0,r.minFilter=THREE.LinearMipMapLinearFilter,r.magFilter=THREE.LinearFilter,r.generateMipmaps=!0,r.anisotropy=8,t=o,e=r;for(var a=i.length-1;a>=0;a--)i[a].target.addText(i[a].text);for(;i.length>0;)i.pop();n&&n()},PANOLENS.SpriteText.prototype.addText=function(n){if(!t||!e)return void i.push({target:this,text:n});var o=new THREE.Object3D;this.options.text=n,this.options.font=t,this.options.width=this.maxWidth;var r=this.generateTextGeometry(this.options);r.computeBoundingBox(),r.computeBoundingSphere();var a=new THREE.RawShaderMaterial(this.generateSDFShader({map:e,side:THREE.DoubleSide,transparent:!0,color:this.color,opacity:this.opacity})),s=r.layout,h=new THREE.Mesh(r,a);h.entity=this,h.position.x=-s.width/2,h.position.y=1.035*s.height,o.scale.x=o.scale.y=-.05,o.add(h),this.mesh=h,this.add(o)},PANOLENS.SpriteText.prototype.update=function(t){var e;t=t||{},e=this.mesh,e.geometry.update(t),e.position.x=-e.geometry.layout.width/2,e.position.y=1.035*e.geometry.layout.height},PANOLENS.SpriteText.prototype.tween=function(t,e,i,n,o,r,a,s,h){return e=e||this,i=i||{},n=n||this.animationDuration,o=o||TWEEN.Easing.Exponential.Out,r=void 0!==r?r:0,a=a?a:null,s=s?s:null,h=h?h:null,this.tweens[t]||(this.tweens[t]=new TWEEN.Tween(e).to(i,n).easing(o).delay(r).onStart(a).onUpdate(s).onComplete(h)),this.tweens[t]},PANOLENS.SpriteText.prototype.getLayout=function(){return this.mesh&&this.mesh.geometry&&this.mesh.geometry.layout||{}},PANOLENS.SpriteText.prototype.setEntity=function(t){this.entity=t}}(),function(){PANOLENS.Widget=function(t){THREE.EventDispatcher.call(this),this.container=t,this.barElement,this.fullscreenElement,this.navigationElement,this.vrElement,this.videoElement},PANOLENS.Widget.prototype=Object.create(THREE.EventDispatcher.prototype),PANOLENS.Widget.prototype.constructor=PANOLENS.Widget,PANOLENS.Widget.prototype.addControlBar=function(){if(!this.container)return void console.warn("Widget container not set");var t,e,i,n=this;t=document.createElement("div"),t.style.width="100%",t.style.height="44px",t.style["float"]="left",t.style.transform=t.style.webkitTransform=t.style.msTransform="translateY(-100%)",t.style.background="rgba( 0, 0, 0, 0.3 )",t.style.transition="all 0.5s ease",t.isHidden=!1,t.toggle=function(){t.isHidden=!t.isHidden,e=t.isHidden?"translateY(0)":"translateY(-100%)",i=t.isHidden?0:1,t.style.transform=t.style.webkitTransform=t.style.msTransform=e,t.style.opacity=i},t.dispose=function(){n.fullscreenElement&&(t.removeChild(n.fullscreenElement),n.fullscreenElement.dispose(),n.fullscreenElement=null),n.navigationElement&&(t.removeChild(n.navigationElement),n.navigationElement.dispose(),n.navigationElement=null),n.vrElement&&(t.removeChild(n.vrElement),n.vrElement.dispose(),n.vrElement=null),n.videoElement&&(t.removeChild(n.videoElement),n.videoElement.dispose(),n.videoElement=null)},this.container.appendChild(t),this.addEventListener("control-bar-toggle",t.toggle),this.barElement=t},PANOLENS.Widget.prototype.addControlButton=function(t){this.fullscreenElement="fullscreen"===t?this.createFullscreenButton():this.fullscreenElement,this.navigationElement="navigation"===t?this.createCameraControlButton():this.navigationElement,this.vrElement="vr"===t?this.createVRButton():this.vrElement,this.videoElement="video"===t?this.createVideoControl():this.videoElement,this.fullscreenElement&&this.barElement.appendChild(this.fullscreenElement),this.navigationElement&&this.barElement.appendChild(this.navigationElement),this.vrElement&&this.barElement.appendChild(this.vrElement),this.videoElement&&this.barElement.appendChild(this.videoElement)},PANOLENS.Widget.prototype.createVRButton=function(){function t(){i.dispatchEvent({type:"panolens-viewer-handler",method:"toggleVR"})}var e,i=this;return e=this.createCustomItem({style:{backgroundImage:'url("'+PANOLENS.DataImage.Cardboard+'")'},onTap:t})},PANOLENS.Widget.prototype.createFullscreenButton=function(){function t(){o?(document.exitFullscreen&&document.exitFullscreen(),document.msExitFullscreen&&document.msExitFullscreen(),document.mozCancelFullScreen&&document.mozCancelFullScreen(),document.webkitExitFullscreen&&document.webkitExitFullscreen(),o=!1):(n.container.requestFullscreen&&n.container.requestFullscreen(),n.container.msRequestFullscreen&&n.container.msRequestFullscreen(),n.container.mozRequestFullScreen&&n.container.mozRequestFullScreen(),n.container.webkitRequestFullscreen&&n.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),o=!0,e()),this.style.backgroundImage=o?'url("'+PANOLENS.DataImage.FullscreenLeave+'")':'url("'+PANOLENS.DataImage.FullscreenEnter+'")',n.dispatchEvent({type:"panolens-viewer-handler",method:"toggleFullscreen",data:o})}function e(){for(var t=document.querySelectorAll(".panolens-infospot"),e=0;e<t.length;e++)t[e].parentElement!==n.container&&n.container.appendChild(t[e])}var i,n=this,o=!1;if(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)return i=this.createCustomItem({style:{backgroundImage:'url("'+PANOLENS.DataImage.FullscreenEnter+'")'},onTap:t})},PANOLENS.Widget.prototype.createCameraControlButton=function(){function t(){i.dispatchEvent({type:"panolens-viewer-handler",method:"toggleNextControl"}),this.controlName="orbit"===this.controlName?"device-orientation":"orbit",this.style.backgroundImage='url("'+("orbit"===this.controlName?PANOLENS.DataImage.Gyro:PANOLENS.DataImage.Orbit)+'")'}var e,i=this;return e=this.createCustomItem({style:{backgroundImage:'url("'+PANOLENS.DataImage.Gyro+'")'},onTap:t}),e.controlName="orbit",e},PANOLENS.Widget.prototype.createVideoControl=function(){var t;return t=document.createElement("span"),t.style.display="none",t.show=function(){t.style.display=""},t.hide=function(){t.style.display="none",t.controlButton.paused=!0,t.controlButton.update(),t.seekBar.setProgress(0)},t.controlButton=this.createVideoControlButton(),t.seekBar=this.createVideoControlSeekbar(),t.appendChild(t.controlButton),t.appendChild(t.seekBar),t.dispose=function(){t.removeChild(t.controlButton),t.removeChild(t.seekBar),t.controlButton.dispose(),t.controlButton=null,t.seekBar.dispose(),t.seekBar=null},this.addEventListener("video-control-show",t.show),this.addEventListener("video-control-hide",t.hide),t},PANOLENS.Widget.prototype.createVideoControlButton=function(){function t(){i.dispatchEvent({type:"panolens-viewer-handler",method:"toggleVideoPlay"}),this.paused=!this.paused,e.update()}var e,i=this;return e=this.createCustomItem({style:{"float":"left",backgroundImage:'url("'+PANOLENS.DataImage.VideoPlay+'")'},onTap:t}),e.paused=!0,e.update=function(){this.style.backgroundImage='url("'+(this.paused?PANOLENS.DataImage.VideoPlay:PANOLENS.DataImage.VideoPause)+'")'},e},PANOLENS.Widget.prototype.createVideoControlSeekbar=function(){function t(t){t.stopPropagation(),f=!0,u=t.clientX||t.changedTouches&&t.changedTouches[0].clientX,l=parseInt(h.style.width)/100,n()}function e(t){var e;f&&(e=t.clientX||t.changedTouches&&t.changedTouches[0].clientX,d=(e-u)/s.clientWidth,d=l+d,d=d>1?1:0>d?0:d,s.setProgress(d),p.dispatchEvent({type:"panolens-viewer-handler",method:"setVideoCurrentTime",data:d}))}function i(t){t.stopPropagation(),f=!1,o()}function n(){p.container.addEventListener("mousemove",e,!1),p.container.addEventListener("mouseup",i,!1),p.container.addEventListener("touchmove",e,!1),p.container.addEventListener("touchend",i,!1)}function o(){p.container.removeEventListener("mousemove",e,!1),p.container.removeEventListener("mouseup",i,!1),p.container.removeEventListener("touchmove",e,!1),p.container.removeEventListener("touchend",i,!1)}function r(t){var e;t.target!==c&&(e=t.changedTouches&&t.changedTouches.length>0?(t.changedTouches[0].pageX-t.target.getBoundingClientRect().left)/this.clientWidth:t.offsetX/this.clientWidth,p.dispatchEvent({type:"panolens-viewer-handler",method:"setVideoCurrentTime",data:e}),s.setProgress(t.offsetX/this.clientWidth))}function a(){o(),h=null,c=null}var s,h,c,u,l,d,p=this,f=!1;return h=document.createElement("div"),h.style.width="0%",h.style.height="100%",h.style.backgroundColor="#fff",c=document.createElement("div"),c.style["float"]="right",c.style.width="14px",c.style.height="14px",c.style.transform="translate(7px, -5px)",c.style.borderRadius="50%",c.style.backgroundColor="#ddd",c.addEventListener("mousedown",t,!1),c.addEventListener("touchstart",t,!1),h.appendChild(c),s=this.createCustomItem({style:{"float":"left",width:"30%",height:"4px",marginTop:"20px",backgroundColor:"rgba(188,188,188,0.8)"},onTap:r,onDispose:a}),s.appendChild(h),s.setProgress=function(t){h.style.width=100*t+"%"},this.addEventListener("video-update",function(t){s.setProgress(t.percentage)}),s},PANOLENS.Widget.prototype.createCustomItem=function(t){t=t||{};var e=t.element||document.createElement("span"),i=void 0===document.ontouchend?!1:!0;return e.style.cursor="pointer",e.style["float"]="right",e.style.width="44px",e.style.height="100%",e.style.backgroundSize="60%",e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="center",e.style.webkitUserSelect=e.style.MozUserSelect=e.style.userSelect="none",e.addEventListener(i?"touchstart":"mouseenter",function(){e.style.filter=e.style.webkitFilter="drop-shadow(0 0 5px rgba(255,255,255,1))"}),e.addEventListener(i?"touchend":"mouseleave",function(){e.style.filter=e.style.webkitFilter=""}),e=this.mergeStyleOptions(e,t.style),t.onTap&&e.addEventListener(i?"touchend":"click",t.onTap,!0),e.dispose=function(){e.removeEventListener(i?"touchend":"click",t.onTap,!0),t.onDispose&&t.onDispose()},e},PANOLENS.Widget.prototype.mergeStyleOptions=function(t,e){e=e||{};for(var i in e)e.hasOwnProperty(i)&&(t.style[i]=e[i]);return t},PANOLENS.Widget.prototype.dispose=function(){this.barElement&&(this.container.removeChild(this.barElement),this.barElement.dispose(),this.barElement=null)}}(),function(){PANOLENS.Infospot=function(t,e,i){function n(e){u.material.side=THREE.DoubleSide,u.material.map=e,u.material.depthTest=!1,e.wrapS=THREE.RepeatWrapping,e.repeat.x=-1,a=e.image.width/e.image.height,
u.scale.set(a*t,t,1),s=u.scale.clone(),h=u.scale.clone().multiplyScalar(1.3),h.z=1,u.scaleUpAnimation=new TWEEN.Tween(u.scale).to({x:h.x,y:h.y},c).easing(TWEEN.Easing.Elastic.Out),u.scaleDownAnimation=new TWEEN.Tween(u.scale).to({x:s.x,y:s.y},c).easing(TWEEN.Easing.Elastic.Out)}function o(){this.visible=!0}function r(){this.visible=!1}var a,s,h,c,u=this;t=t||1,e=e||PANOLENS.DataImage.Info,c=500,THREE.Sprite.call(this),this.type="infospot",this.animated=void 0!==i?i:!0,this.isHovering=!1,this.visible=!1,this.element,this.toPanorama,this.cursorStyle,this.mode=PANOLENS.Modes.UNKNOWN,this.scale.set(t,t,1),this.rotation.y=Math.PI,this.container,PANOLENS.Utils.TextureLoader.load(e,n),this.showAnimation=new TWEEN.Tween(this.material).to({opacity:1},c).onStart(o.bind(this)).easing(TWEEN.Easing.Quartic.Out),this.hideAnimation=new TWEEN.Tween(this.material).to({opacity:0},c).onComplete(r.bind(this)).easing(TWEEN.Easing.Quartic.Out),this.addEventListener("click",this.onClick),this.addEventListener("hover",this.onHover),this.addEventListener("hoverenter",this.onHoverStart),this.addEventListener("hoverleave",this.onHoverEnd),this.addEventListener("VR-toggle",this.onToggleVR),this.addEventListener("panolens-container",this.setContainer.bind(this))},PANOLENS.Infospot.prototype=Object.create(THREE.Sprite.prototype),PANOLENS.Infospot.prototype.setContainer=function(t){var e;t instanceof HTMLElement?e=t:t&&t.container&&(e=t.container),e&&this.element&&e.appendChild(this.element),this.container=e},PANOLENS.Infospot.prototype.getContainer=function(){return this.container},PANOLENS.Infospot.prototype.onClick=function(t){this.element&&this.getContainer()&&(this.translateElement(t.mouseEvent.clientX,t.mouseEvent.clientY),this.lockHoverElement())},PANOLENS.Infospot.prototype.onHover=function(t){this.element&&!this.element.locked&&this.getContainer()&&this.translateElement(t.mouseEvent.clientX,t.mouseEvent.clientY)},PANOLENS.Infospot.prototype.onHoverStart=function(t){if(this.getContainer()){var e=this.cursorStyle||(this.mode===PANOLENS.Modes.VR?"default":"pointer");this.isHovering=!0,this.container.style.cursor=e,this.animated&&(this.scaleDownAnimation.stop(),this.scaleUpAnimation.start()),this.element&&(this.mode===PANOLENS.Modes.VR?(this.element.style.display="none",this.element.left&&(this.element.left.style.display="block"),this.element.right&&(this.element.right.style.display="block"),this.element._width=this.element.left.clientWidth,this.element._height=this.element.left.clientHeight):(this.element.style.display="block",this.element.left&&(this.element.left.style.display="none"),this.element.right&&(this.element.right.style.display="none"),this.element._width=this.element.clientWidth,this.element._height=this.element.clientHeight),this.translateElement(t.mouseEvent.clientX,t.mouseEvent.clientY))}},PANOLENS.Infospot.prototype.onHoverEnd=function(){this.getContainer()&&(this.isHovering=!1,this.container.style.cursor="default",this.animated&&(this.scaleUpAnimation.stop(),this.scaleDownAnimation.start()),this.element&&(this.element.style.display="none",this.element.left&&(this.element.left.style.display="none"),this.element.right&&(this.element.right.style.display="none"),this.unlockHoverElement()))},PANOLENS.Infospot.prototype.onToggleVR=function(t){if(this.getContainer()){var e,i,n;this.mode=t.mode,e=this.element,i=this.container.clientWidth/2,n=this.container.clientHeight/2,e&&(e.left&&e.right||(e.left=e.cloneNode(!0),e.right=e.cloneNode(!0)),this.mode===PANOLENS.Modes.VR?(e.left.style.display=e.style.display,e.right.style.display=e.style.display,e.style.display="none"):(e.style.display=e.left.style.display,e.left.style.display="none",e.right.style.display="none"),this.translateElement(i,n),this.container.appendChild(e.left),this.container.appendChild(e.right))}},PANOLENS.Infospot.prototype.translateElement=function(t,e){if(this.element._width&&this.element._height&&this.getContainer()){var i,n,o,r,a,s,h;h=this.container,o=this.element,r=o._width/2,a=o._height,s=30,i=t-r,n=e-a-s,this.mode===PANOLENS.Modes.VR&&o.left&&o.right?(i=h.clientWidth/4-r,n=h.clientHeight/2-a-s,this.setElementStyle("transform",o.left,"translate("+i+"px, "+n+"px)"),i+=h.clientWidth/2,this.setElementStyle("transform",o.right,"translate("+i+"px, "+n+"px)")):this.setElementStyle("transform",o,"translate("+i+"px, "+n+"px)")}},PANOLENS.Infospot.prototype.setElementStyle=function(t,e,i){var n=e.style;"transform"===t&&(n.webkitTransform=n.msTransform=n.transform=i)},PANOLENS.Infospot.prototype.setText=function(t){this.element&&(this.element.textContent=t)},PANOLENS.Infospot.prototype.setCursorHoverStyle=function(t){this.cursorStyle=t},PANOLENS.Infospot.prototype.addHoverText=function(t){this.element||(this.element=document.createElement("div"),this.element.style.display="none",this.element.style.color="#fff",this.element.style.top=0,this.element.style.maxWidth="50%",this.element.style.maxHeight="50%",this.element.style.textShadow="0 0 3px #000000",this.element.style.fontFamily='"Trebuchet MS", Helvetica, sans-serif',this.element.style.position="fixed",this.element.classList.add("panolens-infospot")),this.setText(t)},PANOLENS.Infospot.prototype.addHoverElement=function(t){this.element||(this.element=t.cloneNode(!0),this.element.style.display="none",this.element.style.top=0,this.element.style.position="fixed",this.element.classList.add("panolens-infospot"))},PANOLENS.Infospot.prototype.removeHoverElement=function(){this.element&&(this.element.left&&(this.container.removeChild(this.element.left),this.element.left=null),this.element.right&&(this.container.removeChild(this.element.right),this.element.right=null),this.container.removeChild(this.element),this.element=null)},PANOLENS.Infospot.prototype.lockHoverElement=function(){this.element&&(this.element.locked=!0)},PANOLENS.Infospot.prototype.unlockHoverElement=function(){this.element&&(this.element.locked=!1)},PANOLENS.Infospot.prototype.show=function(t){t=t||0,this.animated&&(this.hideAnimation&&this.hideAnimation.stop(),this.showAnimation&&this.showAnimation.delay(t).start())},PANOLENS.Infospot.prototype.hide=function(t){t=t||0,this.animated&&(this.showAnimation&&this.showAnimation.stop(),this.hideAnimation&&this.hideAnimation.delay(t).start())},PANOLENS.Infospot.prototype.dispose=function(){this.removeHoverElement(),this.material.dispose(),this.parent&&this.parent.remove(this)}}(),function(){"use strict";PANOLENS.Viewer=function(t){if(THREE.EventDispatcher.call(this),!THREE)return void console.error("Three.JS not found");var e;t=t||{},t.controlBar=void 0!==t.controlBar?t.controlBar:!0,t.controlButtons=t.controlButtons||["fullscreen","navigation","vr","video"],t.autoHideControlBar=void 0!==t.autoHideControlBar?t.autoHideControlBar:!1,t.autoHideInfospot=void 0!==t.autoHideInfospot?t.autoHideInfospot:!0,t.horizontalView=void 0!==t.horizontalView?t.horizontalView:!1,t.clickTolerance=t.clickTolerance||10,t.cameraFov=t.cameraFov||60,t.reverseDragging=t.reverseDragging||!1,t.enableReticle=t.enableReticle||!1,t.dwellTime=t.dwellTime||1500,t.autoReticleSelect=void 0!==t.autoReticleSelect?t.autoReticleSelect:!0,this.options=t,t.container?e=t.container:(e=document.createElement("div"),e.style.width=window.innerWidth+"px",e.style.height=window.innerHeight+"px",document.body.appendChild(e),setTimeout(function(){e.style.width="100%",e.style.height="100%"},0)),this.container=e,this.camera=t.camera||new THREE.PerspectiveCamera(this.options.cameraFov,this.container.clientWidth/this.container.clientHeight,1,1e4),this.scene=t.scene||new THREE.Scene,this.renderer=t.renderer||new THREE.WebGLRenderer({alpha:!0,antialias:!0}),this.effect,this.reticle={},this.tempEnableReticle=this.options.enableReticle,this.mode=PANOLENS.Modes.NORMAL,this.OrbitControls,this.DeviceOrientationControls,this.controls,this.panorama,this.widget,this.hoverObject,this.infospot,this.pressEntityObject,this.pressObject,this.raycaster=new THREE.Raycaster,this.raycasterPoint=new THREE.Vector2,this.userMouse=new THREE.Vector2,this.updateCallbacks=[],this.requestAnimationId,this.HANDLER_MOUSE_DOWN=this.onMouseDown.bind(this),this.HANDLER_MOUSE_UP=this.onMouseUp.bind(this),this.HANDLER_MOUSE_MOVE=this.onMouseMove.bind(this),this.HANDLER_WINDOW_RESIZE=this.onWindowResize.bind(this),this.HANDLER_KEY_DOWN=this.onKeyDown.bind(this),this.HANDLER_KEY_UP=this.onKeyUp.bind(this),this.HANDLER_TAP=this.onTap.bind(this,{clientX:this.container.clientWidth/2,clientY:this.container.clientHeight/2}),this.OUTPUT_INFOSPOT=!1,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setClearColor(0,1),this.renderer.domElement.classList.add("panolens-canvas"),this.renderer.domElement.style.display="block",this.container.appendChild(this.renderer.domElement),this.OrbitControls=new THREE.OrbitControls(this.camera,this.container),this.OrbitControls.name="orbit",this.OrbitControls.minDistance=1,this.OrbitControls.noPan=!0,this.DeviceOrientationControls=new THREE.DeviceOrientationControls(this.camera),this.DeviceOrientationControls.name="device-orientation",this.effect=new THREE.CardboardEffect(this.renderer),this.effect.setSize(this.container.clientWidth,this.container.clientHeight),this.controls=[this.OrbitControls,this.DeviceOrientationControls],this.control=this.OrbitControls,this.addReticle(),this.options.horizontalView&&(this.OrbitControls.minPolarAngle=Math.PI/2,this.OrbitControls.maxPolarAngle=Math.PI/2),this.options.controlBar!==!1&&this.addDefaultControlBar(this.options.controlButtons),this.options.reverseDragging&&this.reverseDraggingDirection(),this.options.enableReticle?(this.reticle.show(),this.registerReticleEvent()):this.registerMouseAndTouchEvents(),this.registerEventListeners(),this.animate.call(this)},PANOLENS.Viewer.prototype=Object.create(THREE.EventDispatcher.prototype),PANOLENS.Viewer.prototype.constructor=PANOLENS.Viewer,PANOLENS.Viewer.prototype.add=function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}this.scene.add(t),t.addEventListener&&t.addEventListener("panolens-viewer-handler",this.eventHandler.bind(this)),t instanceof PANOLENS.Panorama&&t.dispatchEvent&&t.dispatchEvent({type:"panolens-container",container:this.container}),"panorama"===t.type&&(this.addPanoramaEventListener(t),this.panorama||this.setPanorama(t))},PANOLENS.Viewer.prototype.remove=function(t){t.removeEventListener&&t.removeEventListener("panolens-viewer-handler",this.eventHandler.bind(this)),this.scene.remove(t)},PANOLENS.Viewer.prototype.addDefaultControlBar=function(t){var e=this;return this.widget?void console.warn("Default control bar exists"):(this.widget=new PANOLENS.Widget(this.container),this.widget.addEventListener("panolens-viewer-handler",this.eventHandler.bind(this)),this.widget.addControlBar(),void t.forEach(function(t){e.widget.addControlButton(t)}))},PANOLENS.Viewer.prototype.setPanorama=function(t){"panorama"===t.type&&(this.hideInfospot(),this.panorama&&this.panorama.onLeave(),(this.panorama=t).onEnter())},PANOLENS.Viewer.prototype.eventHandler=function(t){t.method&&this[t.method]&&this[t.method](t.data)},PANOLENS.Viewer.prototype.toggleVR=function(){var t;this.effect&&(this.mode!==PANOLENS.Modes.VR?this.mode=PANOLENS.Modes.VR:this.mode=PANOLENS.Modes.NORMAL),t={type:"VR-toggle",mode:this.mode},this.dispatchEvent(t),this.scene.traverse(function(e){e.dispatchEvent&&e.dispatchEvent(t)}),this.mode===PANOLENS.Modes.VR?this.enableVR():this.disableVR()},PANOLENS.Viewer.prototype.enableVR=function(){this.effect&&this.mode===PANOLENS.Modes.VR&&(this.tempEnableReticle=!0,this.unregisterMouseAndTouchEvents(),this.reticle.show(),this.registerReticleEvent(),this.updateReticleEvent(this.mode))},PANOLENS.Viewer.prototype.disableVR=function(){this.effect&&this.mode===PANOLENS.Modes.NORMAL&&(this.tempEnableReticle=!1,this.options.enableReticle?this.updateReticleEvent(this.mode):(this.reticle.hide(),this.unregisterReticleEvent(),this.registerMouseAndTouchEvents()))},PANOLENS.Viewer.prototype.toggleVideoPlay=function(){this.panorama instanceof PANOLENS.VideoPanorama&&this.panorama.dispatchEvent({type:"video-toggle"})},PANOLENS.Viewer.prototype.setVideoCurrentTime=function(t){this.panorama instanceof PANOLENS.VideoPanorama&&this.panorama.dispatchEvent({type:"video-time",percentage:t})},PANOLENS.Viewer.prototype.onVideoUpdate=function(t){this.widget&&this.widget.dispatchEvent({type:"video-update",percentage:t})},PANOLENS.Viewer.prototype.addUpdateCallback=function(t){t&&this.updateCallbacks.push(t)},PANOLENS.Viewer.prototype.removeUpdateCallback=function(t){var e=this.updateCallbacks.indexOf(t);t&&e>=0&&this.updateCallbacks.splice(e,1)},PANOLENS.Viewer.prototype.showVideoWidget=function(){this.widget&&this.widget.dispatchEvent({type:"video-control-show"})},PANOLENS.Viewer.prototype.hideVideoWidget=function(){this.widget&&this.widget.dispatchEvent({type:"video-control-hide"})},PANOLENS.Viewer.prototype.addPanoramaEventListener=function(t){t.addEventListener("enter-animation-start",this.setCameraControl.bind(this)),t instanceof PANOLENS.VideoPanorama&&(t.addEventListener("enter",this.showVideoWidget.bind(this)),t.addEventListener("leave",this.hideVideoWidget.bind(this)))},PANOLENS.Viewer.prototype.setCameraControl=function(){this.camera.position.copy(this.panorama.position),this.camera.position.z+=1,this.OrbitControls.target.copy(this.panorama.position)},PANOLENS.Viewer.prototype.getControl=function(){return this.control},PANOLENS.Viewer.prototype.getScene=function(){return this.scene},PANOLENS.Viewer.prototype.getCamera=function(){return this.camera},PANOLENS.Viewer.prototype.getRenderer=function(){return this.renderer},PANOLENS.Viewer.prototype.getContainer=function(){return this.container},PANOLENS.Viewer.prototype.getControlName=function(){return this.control.name},PANOLENS.Viewer.prototype.getNextControlName=function(){return this.controls[this.getNextControlIndex()].name},PANOLENS.Viewer.prototype.getNextControlIndex=function(){var t,e,i;return t=this.controls,e=this.control,i=t.indexOf(e)+1,i>=t.length?0:i},PANOLENS.Viewer.prototype.setCameraFov=function(t){this.camera.fov=t,this.camera.updateProjectionMatrix()},PANOLENS.Viewer.prototype.enableControl=function(t){switch(t=t>=0&&t<this.controls.length?t:0,this.control.enabled=!1,this.control=this.controls[t],this.control.enabled=!0,this.control.name){case"orbit":this.camera.position.copy(this.panorama.position),this.camera.position.z+=1;break;case"device-orientation":this.camera.position.copy(this.panorama.position)}},PANOLENS.Viewer.prototype.toggleNextControl=function(){this.enableControl(this.getNextControlIndex())},PANOLENS.Viewer.prototype.toggleFullscreen=function(t){t?(this.container._width=this.container.clientWidth,this.container._height=this.container.clientHeight,this.container.style.width="100%",this.container.style.height="100%"):(this.container._width&&(this.container.style.width=this.container._width+"px"),this.container._height&&(this.container.style.height=this.container._height+"px"))},PANOLENS.Viewer.prototype.reverseDraggingDirection=function(){this.OrbitControls.rotateSpeed*=-1,this.OrbitControls.momentumScalingFactor*=-1},PANOLENS.Viewer.prototype.addReticle=function(){this.reticle=new PANOLENS.Reticle(1752220),this.reticle.position.z=-10,this.reticle.scale.multiplyScalar(.3),this.camera.add(this.reticle),this.scene.add(this.camera)},PANOLENS.Viewer.prototype.onWindowResize=function(){var t,e;t=this.container.clientWidth,e=this.container.clientHeight,this.camera.aspect=t/e,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,e),(this.options.enableReticle||this.tempEnableReticle)&&this.updateReticleEvent(this.mode),this.dispatchEvent({type:"window-resize",width:t,height:e})},PANOLENS.Viewer.prototype.render=function(){TWEEN.update(),this.updateCallbacks.forEach(function(t){t()}),this.control&&this.control.update(),this.mode===PANOLENS.Modes.VR?this.effect.render(this.scene,this.camera):this.renderer.render(this.scene,this.camera)},PANOLENS.Viewer.prototype.outputInfospotPosition=function(){var t,e;t=this.raycaster.intersectObject(this.panorama,!0),t.length>0&&(e=t[0].point.clone(),console.info("{ "+-e.x.toFixed(2)+", "+e.y.toFixed(2)+", "+e.z.toFixed(2)+" }"))},PANOLENS.Viewer.prototype.onMouseDown=function(t){t.preventDefault(),this.userMouse.x=t.clientX?t.clientX:t.touches[0].clientX,this.userMouse.y=t.clientY?t.clientY:t.touches[0].clientY,this.userMouse.type="mousedown",this.onTap(t)},PANOLENS.Viewer.prototype.onMouseMove=function(t){t.preventDefault(),this.userMouse.type="mousemove",this.onTap(t)},PANOLENS.Viewer.prototype.onMouseUp=function(t){var e,i=!1;this.userMouse.type="mouseup",e=this.userMouse.x>=t.clientX-this.options.clickTolerance&&this.userMouse.x<=t.clientX+this.options.clickTolerance&&this.userMouse.y>=t.clientY-this.options.clickTolerance&&this.userMouse.y<=t.clientY+this.options.clickTolerance||t.changedTouches&&this.userMouse.x>=t.changedTouches[0].clientX-this.options.clickTolerance&&this.userMouse.x<=t.changedTouches[0].clientX+this.options.clickTolerance&&this.userMouse.y>=t.changedTouches[0].clientY-this.options.clickTolerance&&this.userMouse.y<=t.changedTouches[0].clientY+this.options.clickTolerance?"click":void 0,t&&t.target&&!t.target.classList.contains("panolens-canvas")||(t.preventDefault(),i=t.changedTouches&&1===t.changedTouches.length?this.onTap({clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY},e):this.onTap(t,e),this.userMouse.type="none",i||"click"===e&&(this.options.autoHideInfospot&&this.panorama&&this.panorama.toggleInfospotVisibility(),this.options.autoHideControlBar&&this.toggleControlBar()))},PANOLENS.Viewer.prototype.onTap=function(t,e){var i,n,o;if(this.raycasterPoint.x=(t.clientX-this.renderer.domElement.offsetLeft)/this.renderer.domElement.clientWidth*2-1,this.raycasterPoint.y=2*-((t.clientY-this.renderer.domElement.offsetTop)/this.renderer.domElement.clientHeight)+1,this.raycaster.setFromCamera(this.raycasterPoint,this.camera),this.panorama)if(this.OUTPUT_INFOSPOT&&this.outputInfospotPosition(),i=this.raycaster.intersectObjects(this.panorama.children,!0),n=this.getConvertedIntersect(i),o=i.length>0?i[0].object:o,"mouseup"===this.userMouse.type&&(n&&this.pressEntityObject===n&&this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressstop-entity",mouseEvent:t}),this.pressEntityObject=void 0),"mouseup"===this.userMouse.type&&(o&&this.pressObject===o&&this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressstop",mouseEvent:t}),this.pressObject=void 0),"click"===e?(this.panorama.dispatchEvent({type:"click",intersects:i,mouseEvent:t}),n&&n.dispatchEvent&&n.dispatchEvent({type:"click-entity",mouseEvent:t}),o&&o.dispatchEvent&&o.dispatchEvent({type:"click",mouseEvent:t})):(this.panorama.dispatchEvent({type:"hover",intersects:i,mouseEvent:t}),(this.hoverObject&&i.length>0&&this.hoverObject!==n||this.hoverObject&&0===i.length)&&(this.hoverObject.dispatchEvent&&(this.hoverObject.dispatchEvent({type:"hoverleave",mouseEvent:t}),this.reticle.timerId&&(window.cancelAnimationFrame(this.reticle.timerId),this.reticle.timerId=null)),this.hoverObject=void 0),n&&i.length>0&&(this.hoverObject!==n&&(this.hoverObject=n,this.hoverObject.dispatchEvent&&(this.hoverObject.dispatchEvent({type:"hoverenter",mouseEvent:t}),(this.options.autoReticleSelect&&this.options.enableReticle||this.tempEnableReticle)&&(this.reticle.startTime=window.performance.now(),this.reticle.timerId=window.requestAnimationFrame(this.reticleSelect.bind(this,t))))),"mousedown"===this.userMouse.type&&this.pressEntityObject!=n&&(this.pressEntityObject=n,this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressstart-entity",mouseEvent:t})),"mousedown"===this.userMouse.type&&this.pressObject!=o&&(this.pressObject=o,this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressstart",mouseEvent:t})),("mousemove"===this.userMouse.type||this.options.enableReticle)&&(o&&o.dispatchEvent&&o.dispatchEvent({type:"hover",mouseEvent:t}),this.pressEntityObject&&this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressmove-entity",mouseEvent:t}),this.pressObject&&this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressmove",mouseEvent:t}))),!n&&this.pressEntityObject&&this.pressEntityObject.dispatchEvent&&(this.pressEntityObject.dispatchEvent({type:"pressstop-entity",mouseEvent:t}),this.pressEntityObject=void 0),!o&&this.pressObject&&this.pressObject.dispatchEvent&&(this.pressObject.dispatchEvent({type:"pressstop",mouseEvent:t}),this.pressObject=void 0)),o&&o instanceof PANOLENS.Infospot){if(this.infospot=o,"click"===e)return!0}else this.infospot&&this.hideInfospot()},PANOLENS.Viewer.prototype.getConvertedIntersect=function(t){for(var e,i=0;i<t.length;i++)if(t[i].object&&!t[i].object.passThrough){if(t[i].object.entity&&t[i].object.entity.passThrough)continue;if(t[i].object.entity&&!t[i].object.entity.passThrough){e=t[i].object.entity;break}e=t[i].object;break}return e},PANOLENS.Viewer.prototype.hideInfospot=function(t){this.infospot&&(this.infospot.onHoverEnd(),this.infospot=void 0)},PANOLENS.Viewer.prototype.toggleControlBar=function(){this.widget&&this.widget.dispatchEvent({type:"control-bar-toggle"})},PANOLENS.Viewer.prototype.onKeyDown=function(t){(17===t.keyCode||"Control"===t.keyIdentifier)&&(this.OUTPUT_INFOSPOT=!0)},PANOLENS.Viewer.prototype.onKeyUp=function(t){this.OUTPUT_INFOSPOT=!1},PANOLENS.Viewer.prototype.animate=function(){this.requestAnimationId=window.requestAnimationFrame(this.animate.bind(this)),this.render()},PANOLENS.Viewer.prototype.registerMouseAndTouchEvents=function(){this.container.addEventListener("mousedown",this.HANDLER_MOUSE_DOWN,!0),this.container.addEventListener("mousemove",this.HANDLER_MOUSE_MOVE,!0),this.container.addEventListener("mouseup",this.HANDLER_MOUSE_UP,!0),this.container.addEventListener("touchstart",this.HANDLER_MOUSE_DOWN,!0),this.container.addEventListener("touchend",this.HANDLER_MOUSE_UP,!0)},PANOLENS.Viewer.prototype.unregisterMouseAndTouchEvents=function(){this.container.removeEventListener("mousedown",this.HANDLER_MOUSE_DOWN,!0),this.container.removeEventListener("mousemove",this.HANDLER_MOUSE_MOVE,!0),this.container.removeEventListener("mouseup",this.HANDLER_MOUSE_UP,!0),this.container.removeEventListener("touchstart",this.HANDLER_MOUSE_DOWN,!0),this.container.removeEventListener("touchend",this.HANDLER_MOUSE_UP,!0)},PANOLENS.Viewer.prototype.reticleSelect=function(t){var e=this.reticle;performance.now()-e.startTime>=this.options.dwellTime?(this.onTap(t,"click"),window.cancelAnimationFrame(e.timerId),e.timerId=null):this.options.autoReticleSelect&&(e.timerId=window.requestAnimationFrame(this.reticleSelect.bind(this,t)))},PANOLENS.Viewer.prototype.registerReticleEvent=function(){this.addUpdateCallback(this.HANDLER_TAP)},PANOLENS.Viewer.prototype.unregisterReticleEvent=function(){this.removeUpdateCallback(this.HANDLER_TAP)},PANOLENS.Viewer.prototype.updateReticleEvent=function(t){var e,i;e=this.container.clientWidth/2,i=this.container.clientHeight/2,this.removeUpdateCallback(this.HANDLER_TAP),this.HANDLER_TAP=this.onTap.bind(this,{clientX:e,clientY:i}),this.addUpdateCallback(this.HANDLER_TAP)},PANOLENS.Viewer.prototype.registerEventListeners=function(){window.addEventListener("resize",this.HANDLER_WINDOW_RESIZE,!0),window.addEventListener("keydown",this.HANDLER_KEY_DOWN,!0),window.addEventListener("keyup",this.HANDLER_KEY_UP,!0)},PANOLENS.Viewer.prototype.unregisterEventListeners=function(){window.removeEventListener("resize",this.HANDLER_WINDOW_RESIZE,!0),window.removeEventListener("keydown",this.HANDLER_KEY_DOWN,!0),window.removeEventListener("keyup",this.HANDLER_KEY_UP,!0)},PANOLENS.Viewer.prototype.dispose=function(){function t(e){for(var i=e.children.length-1;i>=0;i--)t(e.children[i]),e.remove(e.children[i]);e instanceof PANOLENS.Infospot&&e.dispose(),e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}this.unregisterEventListeners(),t(this.scene),this.widget&&(this.widget.dispose(),this.widget=null),THREE.Cache&&THREE.Cache.enabled&&THREE.Cache.clear()},PANOLENS.Viewer.prototype.destory=function(){this.dispose(),this.render(),window.cancelAnimationFrame(this.requestAnimationId)}}(),function t(e,i,n){function o(a,s){if(!i[a]){if(!e[a]){var h="function"==typeof require&&require;if(!s&&h)return h(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){var i=e[a][1][t];return o(i?i:t)},u,u.exports,t,e,i,n)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,i){function n(t){l.call(this),"string"==typeof t&&(t={text:t}),this._opt=h({},t),t&&this.update(t)}var o=t("layout-bmfont-text"),r=t("inherits"),a=t("quad-indices"),s=t("three-buffer-vertex-data"),h=t("object-assign"),c=t("./lib/vertices"),u=t("./lib/utils"),l=THREE.BufferGeometry;e.exports=function(t){return new n(t)},r(n,l),n.prototype.update=function(t){if("string"==typeof t&&(t={text:t}),t=h({},this._opt,t),!t.font)throw new TypeError("must specify a { font } in options");this.layout=o(t);var e=t.flipY!==!1,i=t.font,n=i.common.scaleW,r=i.common.scaleH,u=this.layout.glyphs.filter(function(t){var e=t.data;return e.width*e.height>0});this.visibleGlyphs=u;var l=c.positions(u),d=c.uvs(u,n,r,e),p=a({clockwise:!0,type:"uint16",count:u.length});if(s.index(this,p,1,"uint16"),s.attr(this,"position",l,2),s.attr(this,"uv",d,2),!t.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(t.multipage){var f=c.pages(u);s.attr(this,"page",f,1)}},n.prototype.computeBoundingSphere=function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var t=this.attributes.position.array,e=this.attributes.position.itemSize;return!t||!e||t.length<2?(this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0)):(u.computeSphere(t,this.boundingSphere),void(isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')))},n.prototype.computeBoundingBox=function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var t=this.boundingBox,e=this.attributes.position.array,i=this.attributes.position.itemSize;return!e||!i||e.length<2?void t.makeEmpty():void u.computeBox(e,t)}},{"./lib/utils":2,"./lib/vertices":3,inherits:4,"layout-bmfont-text":5,"object-assign":26,"quad-indices":27,"three-buffer-vertex-data":31}],2:[function(t,e,i){function n(t){var e=t.length/o;r.min[0]=t[0],r.min[1]=t[1],r.max[0]=t[0],r.max[1]=t[1];for(var i=0;e>i;i++){var n=t[i*o+0],a=t[i*o+1];r.min[0]=Math.min(n,r.min[0]),r.min[1]=Math.min(a,r.min[1]),r.max[0]=Math.max(n,r.max[0]),r.max[1]=Math.max(a,r.max[1])}}var o=2,r={min:[0,0],max:[0,0]};e.exports.computeBox=function(t,e){n(t),e.min.set(r.min[0],r.min[1],0),e.max.set(r.max[0],r.max[1],0)},e.exports.computeSphere=function(t,e){n(t);var i=r.min[0],o=r.min[1],a=r.max[0],s=r.max[1],h=a-i,c=s-o,u=Math.sqrt(h*h+c*c);e.center.set(i+h/2,o+c/2,0),e.radius=u/2}},{}],3:[function(t,e,i){e.exports.pages=function n(t){var n=new Float32Array(4*t.length*1),e=0;return t.forEach(function(t){var i=t.data.page||0;n[e++]=i,n[e++]=i,n[e++]=i,n[e++]=i}),n},e.exports.uvs=function o(t,e,i,n){var o=new Float32Array(4*t.length*2),r=0;return t.forEach(function(t){var a=t.data,s=a.x+a.width,h=a.y+a.height,c=a.x/e,u=a.y/i,l=s/e,d=h/i;n&&(u=(i-a.y)/i,d=(i-h)/i),o[r++]=c,o[r++]=u,o[r++]=c,o[r++]=d,o[r++]=l,o[r++]=d,o[r++]=l,o[r++]=u}),o},e.exports.positions=function r(t){var r=new Float32Array(4*t.length*2),e=0;return t.forEach(function(t){var i=t.data,n=t.position[0]+i.xoffset,o=t.position[1]+i.yoffset,a=i.width,s=i.height;r[e++]=n,r[e++]=o,r[e++]=n,r[e++]=o+s,r[e++]=n+a,r[e++]=o+s,r[e++]=n+a,r[e++]=o}),r}},{}],4:[function(t,e,i){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},{}],5:[function(t,e,i){function n(t){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(t)}function o(t){Object.defineProperty(n.prototype,t,{get:r(t),configurable:!0})}function r(t){return new Function(["return function "+t+"() {","  return this._"+t,"}"].join("\n"))()}function a(t,e){if(!t.chars||0===t.chars.length)return null;var i=f(t.chars,e);return i>=0?t.chars[i]:null}function s(t){for(var e=0;e<m.length;e++){var i=m[e].charCodeAt(0),n=f(t.chars,i);if(n>=0)return t.chars[n].height}return 0}function h(t){for(var e=0;e<g.length;e++){var i=g[e].charCodeAt(0),n=f(t.chars,i);if(n>=0)return t.chars[n]}return 0}function c(t){for(var e=0;e<y.length;e++){var i=y[e].charCodeAt(0),n=f(t.chars,i);if(n>=0)return t.chars[n].height}return 0}function u(t,e,i){if(!t.kernings||0===t.kernings.length)return 0;for(var n=t.kernings,o=0;o<n.length;o++){var r=n[o];if(r.first===e&&r.second===i)return r.amount}return 0}function l(t){return"center"===t?w:"right"===t?L:N}var d=t("word-wrapper"),p=t("xtend"),f=t("indexof-property")("id"),E=t("as-number"),m=["x","e","a","o","n","s","r","c","u","m","v","w","z"],g=["m","w"],y=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],v="	".charCodeAt(0),A=" ".charCodeAt(0),N=0,w=1,L=2;e.exports=function(t){return new n(t)},n.prototype.update=function(t){if(t=p({measure:this._measure},t),this._opt=t,this._opt.tabSize=E(this._opt.tabSize,4),!t.font)throw new Error("must provide a valid bitmap font");var e=this.glyphs,i=t.text||"",n=t.font;this._setupSpaceGlyphs(n);var o=d.lines(i,t),r=t.width||0;e.length=0;var a=o.reduce(function(t,e){return Math.max(t,e.width,r)},0),h=0,f=0,m=E(t.lineHeight,n.common.lineHeight),g=n.common.base,y=m-g,v=t.letterSpacing||0,A=m*o.length-y,N=l(this._opt.align);f-=A,this._width=a,this._height=A,this._descender=m-g,this._baseline=g,this._xHeight=s(n),this._capHeight=c(n),this._lineHeight=m,this._ascender=m-y-this._xHeight;var M=this;o.forEach(function(t,o){for(var r,s=t.start,c=t.end,l=t.width,d=s;c>d;d++){var p=i.charCodeAt(d),E=M.getGlyph(n,p);if(E){r&&(h+=u(n,r.id,E.id));var g=h;N===w?g+=(a-l)/2:N===L&&(g+=a-l),e.push({position:[g,f],data:E,index:d,line:o}),h+=E.xadvance+v,r=E}}f+=m,h=0}),this._linesTotal=o.length},n.prototype._setupSpaceGlyphs=function(t){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,t.chars&&0!==t.chars.length){var e=a(t,A)||h(t)||t.chars[0],i=this._opt.tabSize*e.xadvance;this._fallbackSpaceGlyph=e,this._fallbackTabGlyph=p(e,{x:0,y:0,xadvance:i,id:v,xoffset:0,yoffset:0,width:0,height:0})}},n.prototype.getGlyph=function(t,e){var i=a(t,e);return i?i:e===v?this._fallbackTabGlyph:e===A?this._fallbackSpaceGlyph:null},n.prototype.computeMetrics=function(t,e,i,n){var o,r,a=this._opt.letterSpacing||0,s=this._opt.font,h=0,c=0,l=0;if(!s.chars||0===s.chars.length)return{start:e,end:e,width:0};i=Math.min(t.length,i);for(var d=e;i>d;d++){var p=t.charCodeAt(d),o=this.getGlyph(s,p);if(o){var f=(o.xoffset,r?u(s,r.id,o.id):0);h+=f;var E=h+o.xadvance+a,m=h+o.width;if(m>=n||E>=n)break;h=E,c=m,r=o}l++}return r&&(c+=r.xoffset),{start:e,end:e+l,width:c}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(o)},{"as-number":6,"indexof-property":7,"word-wrapper":8,xtend:9}],6:[function(t,e,i){e.exports=function(t,e){return"number"==typeof t?t:"number"==typeof e?e:0}},{}],7:[function(t,e,i){e.exports=function(t){if(!t||"string"!=typeof t)throw new Error("must specify property for indexof search");return new Function("array","value","start",["start = start || 0","for (var i=start; i<array.length; i++)",'  if (array[i]["'+t+'"] === value)',"      return i","return -1"].join("\n"));
}},{}],8:[function(t,e,i){function n(t,e,i,n){var o=t.indexOf(e,i);return-1===o||o>n?n:o}function o(t){return u.test(t)}function r(t,e,i,n,o){for(var r=[],a=i,s=i;n>s&&s<e.length;s++){var c=e.charAt(s),u=h.test(c);if(u||s===n-1){var l=u?s:s+1,d=t(e,a,l,o);r.push(d),a=s+1}}return r}function a(t,e,i,r,a,s){var h=[],u=a;for("nowrap"===s&&(u=Number.MAX_VALUE);r>i&&i<e.length;){for(var l=n(e,c,i,r);l>i&&o(e.charAt(i));)i++;var d=t(e,i,l,u),p=i+(d.end-d.start),f=p+c.length;if(l>p){for(;p>i&&!o(e.charAt(p));)p--;if(p===i)f>i+c.length&&f--,p=f;else for(f=p;p>i&&o(e.charAt(p-c.length));)p--}if(p>=i){var E=t(e,i,p,u);h.push(E)}i=f}return h}function s(t,e,i,n){var o=Math.min(n,i-e);return{start:e,end:e+o}}var h=/\n/,c="\n",u=/\s/;e.exports=function(t,i){var n=e.exports.lines(t,i);return n.map(function(e){return t.substring(e.start,e.end)}).join("\n")},e.exports.lines=function(t,e){if(e=e||{},0===e.width&&"nowrap"!==e.mode)return[];t=t||"";var i="number"==typeof e.width?e.width:Number.MAX_VALUE,n=Math.max(0,e.start||0),o="number"==typeof e.end?e.end:t.length,h=e.mode,c=e.measure||s;return"pre"===h?r(c,t,n,o,i):a(c,t,n,o,i,h)}},{}],9:[function(t,e,i){function n(){for(var t={},e=0;e<arguments.length;e++){var i=arguments[e];for(var n in i)o.call(i,n)&&(t[n]=i[n])}return t}e.exports=n;var o=Object.prototype.hasOwnProperty},{}],10:[function(t,e,i){(function(i){function n(t){var e=Object.prototype.toString;return"[object ArrayBuffer]"===e.call(t)}function o(t){if(d)return l(t,{responseType:"arraybuffer"});if("undefined"==typeof window.XMLHttpRequest)throw new Error("your browser does not support XHR loading");var e=new window.XMLHttpRequest;return e.overrideMimeType("text/plain; charset=x-user-defined"),l({xhr:e},t)}var r=t("xhr"),a=function(){},s=t("parse-bmfont-ascii"),h=t("parse-bmfont-xml"),c=t("parse-bmfont-binary"),u=t("./lib/is-binary"),l=t("xtend"),d=function(){return window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}();e.exports=function(t,e){e="function"==typeof e?e:a,"string"==typeof t?t={uri:t}:t||(t={});var l=t.binary;l&&(t=o(t)),r(t,function(o,r,l){if(o)return e(o);if(!/^2/.test(r.statusCode))return e(new Error("http status code: "+r.statusCode));if(!l)return e(new Error("no body result"));var d=!1;if(n(l)){var p=new Uint8Array(l);l=new i(p,"binary")}u(l)&&(d=!0,"string"==typeof l&&(l=new i(l,"binary"))),d||(i.isBuffer(l)&&(l=l.toString(t.encoding)),l=l.trim());var f;try{var E=r.headers["content-type"];f=d?c(l):/json/.test(E)||"{"===l.charAt(0)?JSON.parse(l):/xml/.test(E)||"<"===l.charAt(0)?h(l):s(l)}catch(m){e(new Error("error parsing font "+m.message)),e=a}e(null,f)})}}).call(this,t("buffer").Buffer)},{"./lib/is-binary":11,buffer:37,"parse-bmfont-ascii":13,"parse-bmfont-binary":14,"parse-bmfont-xml":15,xhr:18,xtend:25}],11:[function(t,e,i){(function(i){var n=t("buffer-equal"),o=new i([66,77,70,3]);e.exports=function(t){return"string"==typeof t?"BMF"===t.substring(0,3):t.length>4&&n(t.slice(0,4),o)}}).call(this,t("buffer").Buffer)},{buffer:37,"buffer-equal":12}],12:[function(t,e,i){var n=t("buffer").Buffer;e.exports=function(t,e){if(n.isBuffer(t)&&n.isBuffer(e)){if("function"==typeof t.equals)return t.equals(e);if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}}},{buffer:37}],13:[function(t,e,i){function n(t,e){if(t=t.replace(/\t+/g," ").trim(),!t)return null;var i=t.indexOf(" ");if(-1===i)throw new Error("no named row at line "+e);var n=t.substring(0,i);t=t.substring(i+1),t=t.replace(/letter=[\'\"]\S+[\'\"]/gi,""),t=t.split("="),t=t.map(function(t){return t.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var r=[],a=0;a<t.length;a++){var s=t[a];0===a?r.push({key:s[0],data:""}):a===t.length-1?r[r.length-1].data=o(s[0]):(r[r.length-1].data=o(s[0]),r.push({key:s[1],data:""}))}var h={key:n,data:{}};return r.forEach(function(t){h.data[t.key]=t.data}),h}function o(t){return t&&0!==t.length?0===t.indexOf('"')||0===t.indexOf("'")?t.substring(1,t.length-1):-1!==t.indexOf(",")?r(t):parseInt(t,10):""}function r(t){return t.split(",").map(function(t){return parseInt(t,10)})}e.exports=function(t){if(!t)throw new Error("no data provided");t=t.toString().trim();var e={pages:[],chars:[],kernings:[]},i=t.split(/\r\n?|\n/g);if(0===i.length)throw new Error("no data in BMFont file");for(var o=0;o<i.length;o++){var r=n(i[o],o);if(r)if("page"===r.key){if("number"!=typeof r.data.id)throw new Error("malformed file at line "+o+" -- needs page id=N");if("string"!=typeof r.data.file)throw new Error("malformed file at line "+o+' -- needs page file="path"');e.pages[r.data.id]=r.data.file}else"chars"===r.key||"kernings"===r.key||("char"===r.key?e.chars.push(r.data):"kerning"===r.key?e.kernings.push(r.data):e[r.key]=r.data)}return e}},{}],14:[function(t,e,i){function n(t,e,i){if(i>e.length-1)return 0;var n=e.readUInt8(i++),c=e.readInt32LE(i);switch(i+=4,n){case 1:t.info=o(e,i);break;case 2:t.common=r(e,i);break;case 3:t.pages=a(e,i,c);break;case 4:t.chars=s(e,i,c);break;case 5:t.kernings=h(e,i,c)}return 5+c}function o(t,e){var i={};i.size=t.readInt16LE(e);var n=t.readUInt8(e+2);return i.smooth=n>>7&1,i.unicode=n>>6&1,i.italic=n>>5&1,i.bold=n>>4&1,n>>3&1&&(i.fixedHeight=1),i.charset=t.readUInt8(e+3)||"",i.stretchH=t.readUInt16LE(e+4),i.aa=t.readUInt8(e+6),i.padding=[t.readInt8(e+7),t.readInt8(e+8),t.readInt8(e+9),t.readInt8(e+10)],i.spacing=[t.readInt8(e+11),t.readInt8(e+12)],i.outline=t.readUInt8(e+13),i.face=u(t,e+14),i}function r(t,e){var i={};i.lineHeight=t.readUInt16LE(e),i.base=t.readUInt16LE(e+2),i.scaleW=t.readUInt16LE(e+4),i.scaleH=t.readUInt16LE(e+6),i.pages=t.readUInt16LE(e+8);t.readUInt8(e+10);return i.packed=0,i.alphaChnl=t.readUInt8(e+11),i.redChnl=t.readUInt8(e+12),i.greenChnl=t.readUInt8(e+13),i.blueChnl=t.readUInt8(e+14),i}function a(t,e,i){for(var n=[],o=c(t,e),r=o.length+1,a=i/r,s=0;a>s;s++)n[s]=t.slice(e,e+o.length).toString("utf8"),e+=r;return n}function s(t,e,i){for(var n=[],o=i/20,r=0;o>r;r++){var a={},s=20*r;a.id=t.readUInt32LE(e+0+s),a.x=t.readUInt16LE(e+4+s),a.y=t.readUInt16LE(e+6+s),a.width=t.readUInt16LE(e+8+s),a.height=t.readUInt16LE(e+10+s),a.xoffset=t.readInt16LE(e+12+s),a.yoffset=t.readInt16LE(e+14+s),a.xadvance=t.readInt16LE(e+16+s),a.page=t.readUInt8(e+18+s),a.chnl=t.readUInt8(e+19+s),n[r]=a}return n}function h(t,e,i){for(var n=[],o=i/10,r=0;o>r;r++){var a={},s=10*r;a.first=t.readUInt32LE(e+0+s),a.second=t.readUInt32LE(e+4+s),a.amount=t.readInt16LE(e+8+s),n[r]=a}return n}function c(t,e){for(var i=e;i<t.length&&0!==t[i];i++);return t.slice(e,i)}function u(t,e){return c(t,e).toString("utf8")}var l=[66,77,70];e.exports=function(t){if(t.length<6)throw new Error("invalid buffer length for BMFont");var e=l.every(function(e,i){return t.readUInt8(i)===e});if(!e)throw new Error("BMFont missing BMF byte header");var i=3,o=t.readUInt8(i++);if(o>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var r={kernings:[],chars:[]},a=0;5>a;a++)i+=n(r,t,i);return r}},{}],15:[function(t,e,i){function n(t){var e=o(t);return e.reduce(function(t,e){var i=r(e.nodeName);return t[i]=e.nodeValue,t},{})}function o(t){for(var e=[],i=0;i<t.attributes.length;i++)e.push(t.attributes[i]);return e}function r(t){return h[t.toLowerCase()]||t}var a=t("./parse-attribs"),s=t("xml-parse-from-string"),h={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};e.exports=function(t){t=t.toString();var e=s(t),i={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(t){var o=e.getElementsByTagName(t)[0];o&&(i[t]=a(n(o)))});var o=e.getElementsByTagName("pages")[0];if(!o)throw new Error("malformed file -- no <pages> element");for(var r=o.getElementsByTagName("page"),h=0;h<r.length;h++){var c=r[h],u=parseInt(c.getAttribute("id"),10),l=c.getAttribute("file");if(isNaN(u))throw new Error('malformed file -- page "id" attribute is NaN');if(!l)throw new Error('malformed file -- needs page "file" attribute');i.pages[parseInt(u,10)]=l}return["chars","kernings"].forEach(function(t){var o=e.getElementsByTagName(t)[0];if(o)for(var r=t.substring(0,t.length-1),s=o.getElementsByTagName(r),h=0;h<s.length;h++){var c=s[h];i[t].push(a(n(c)))}}),i}},{"./parse-attribs":16,"xml-parse-from-string":17}],16:[function(t,e,i){function n(t){return t.split(",").map(function(t){return parseInt(t,10)})}var o="chasrset";e.exports=function(t){o in t&&(t.charset=t[o],delete t[o]);for(var e in t)"face"!==e&&"charset"!==e&&("padding"===e||"spacing"===e?t[e]=n(t[e]):t[e]=parseInt(t[e],10));return t}},{}],17:[function(t,e,i){e.exports=function(){return"undefined"!=typeof window.DOMParser?function(t){var e=new window.DOMParser;return e.parseFromString(t,"application/xml")}:"undefined"!=typeof window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")?function(t){var e=new window.ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e}:function(t){var e=document.createElement("div");return e.innerHTML=t,e}}()},{}],18:[function(t,e,i){"use strict";function n(t,e){for(var i=0;i<t.length;i++)e(t[i])}function o(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function r(t,e,i){var n=t;return l(e)?(i=e,"string"==typeof t&&(n={uri:t})):n=p(e,{uri:t}),n.callback=i,n}function a(t,e,i){return e=r(t,e,i),s(e)}function s(t){function e(){4===c.readyState&&r()}function i(){var t=void 0;if(c.response?t=c.response:"text"!==c.responseType&&c.responseType||(t=c.responseText||c.responseXML),A)try{t=JSON.parse(t)}catch(e){}return t}function n(t){clearTimeout(f),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,s(t,h)}function r(){if(!p){var e;clearTimeout(f),e=t.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var n=h,o=null;0!==e?(n={body:i(),statusCode:e,method:m,headers:{},url:E,rawRequest:c},c.getAllResponseHeaders&&(n.headers=d(c.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),s(o,n,n.body)}}var s=t.callback;if("undefined"==typeof s)throw new Error("callback argument missing");s=u(s);var h={body:void 0,headers:{},statusCode:0,method:m,url:E,rawRequest:c},c=t.xhr||null;c||(c=t.cors||t.useXDR?new a.XDomainRequest:new a.XMLHttpRequest);var l,p,f,E=c.url=t.uri||t.url,m=c.method=t.method||"GET",g=t.body||t.data||null,y=c.headers=t.headers||{},v=!!t.sync,A=!1;if("json"in t&&(A=!0,y.accept||y.Accept||(y.Accept="application/json"),"GET"!==m&&"HEAD"!==m&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),g=JSON.stringify(t.json))),c.onreadystatechange=e,c.onload=r,c.onerror=n,c.onprogress=function(){},c.ontimeout=n,c.open(m,E,!v,t.username,t.password),v||(c.withCredentials=!!t.withCredentials),!v&&t.timeout>0&&(f=setTimeout(function(){p=!0,c.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",n(t)},t.timeout)),c.setRequestHeader)for(l in y)y.hasOwnProperty(l)&&c.setRequestHeader(l,y[l]);else if(t.headers&&!o(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(c.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(c),c.send(g),c}function h(){}var c=t("global/window"),u=t("once"),l=t("is-function"),d=t("parse-headers"),p=t("xtend");e.exports=a,a.XMLHttpRequest=c.XMLHttpRequest||h,a.XDomainRequest="withCredentials"in new a.XMLHttpRequest?a.XMLHttpRequest:c.XDomainRequest,n(["get","put","post","patch","head","delete"],function(t){a["delete"===t?"del":t]=function(e,i,n){return i=r(e,i,n),i.method=t.toUpperCase(),s(i)}})},{"global/window":19,"is-function":20,once:21,"parse-headers":24,xtend:25}],19:[function(t,e,i){(function(t){"undefined"!=typeof window?e.exports=window:"undefined"!=typeof t?e.exports=t:"undefined"!=typeof self?e.exports=self:e.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(t,e,i){function n(t){var e=o.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}e.exports=n;var o=Object.prototype.toString},{}],21:[function(t,e,i){function n(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}e.exports=n,n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0})})},{}],22:[function(t,e,i){function n(t,e,i){if(!s(e))throw new TypeError("iterator must be a function");arguments.length<3&&(i=this),"[object Array]"===h.call(t)?o(t,e,i):"string"==typeof t?r(t,e,i):a(t,e,i)}function o(t,e,i){for(var n=0,o=t.length;o>n;n++)c.call(t,n)&&e.call(i,t[n],n,t)}function r(t,e,i){for(var n=0,o=t.length;o>n;n++)e.call(i,t.charAt(n),n,t)}function a(t,e,i){for(var n in t)c.call(t,n)&&e.call(i,t[n],n,t)}var s=t("is-function");e.exports=n;var h=Object.prototype.toString,c=Object.prototype.hasOwnProperty},{"is-function":20}],23:[function(t,e,i){function n(t){return t.replace(/^\s*|\s*$/g,"")}i=e.exports=n,i.left=function(t){return t.replace(/^\s*/,"")},i.right=function(t){return t.replace(/\s*$/,"")}},{}],24:[function(t,e,i){var n=t("trim"),o=t("for-each"),r=function(t){return"[object Array]"===Object.prototype.toString.call(t)};e.exports=function(t){if(!t)return{};var e={};return o(n(t).split("\n"),function(t){var i=t.indexOf(":"),o=n(t.slice(0,i)).toLowerCase(),a=n(t.slice(i+1));"undefined"==typeof e[o]?e[o]=a:r(e[o])?e[o].push(a):e[o]=[e[o],a]}),e}},{"for-each":22,trim:23}],25:[function(t,e,i){arguments[4][9][0].apply(i,arguments)},{dup:9}],26:[function(t,e,i){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=Object.assign||function(t,e){for(var i,a,s=n(t),h=1;h<arguments.length;h++){i=Object(arguments[h]);for(var c in i)o.call(i,c)&&(s[c]=i[c]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(i);for(var u=0;u<a.length;u++)r.call(i,a[u])&&(s[a[u]]=i[a[u]])}}return s}},{}],27:[function(t,e,i){var n=t("dtype"),o=t("an-array"),r=t("is-buffer"),a=[0,2,3],s=[2,1,3];e.exports=function(t,e){t&&(o(t)||r(t))||(e=t||{},t=null),e="number"==typeof e?{count:e}:e||{};for(var i="string"==typeof e.type?e.type:"uint16",h="number"==typeof e.count?e.count:1,c=e.start||0,u=e.clockwise!==!1?a:s,l=u[0],d=u[1],p=u[2],f=6*h,E=t||new(n(i))(f),m=0,g=0;f>m;m+=6,g+=4){var y=m+c;E[y+0]=g+0,E[y+1]=g+1,E[y+2]=g+2,E[y+3]=g+l,E[y+4]=g+d,E[y+5]=g+p}return E}},{"an-array":28,dtype:29,"is-buffer":30}],28:[function(t,e,i){function n(t){return t.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===o.call(t.buffer)||Array.isArray(t)}var o=Object.prototype.toString;e.exports=n},{}],29:[function(t,e,i){e.exports=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],30:[function(t,e,i){e.exports=function(t){return!(null==t||!(t._isBuffer||t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)))}},{}],31:[function(t,e,i){function n(t,e,i,n){"number"!=typeof i&&(i=1),"number"!=typeof n&&(n="uint16");var o=!t.index&&"function"!=typeof t.setIndex,a=o?t.getAttribute("index"):t.index,s=r(a,e,i,n);s&&(o?t.addAttribute("index",s):t.index=s)}function o(t,e,i,n,o){if("number"!=typeof n&&(n=3),"number"!=typeof o&&(o="float32"),Array.isArray(i)&&Array.isArray(i[0])&&i[0].length!==n)throw new Error("Nested vertex array has unexpected size; expected "+n+" but found "+i[0].length);var a=t.getAttribute(e),s=r(a,i,n,o);s&&t.addAttribute(e,s)}function r(t,e,i,n){return e=e||[],!t||a(t,e,i)?(e=s(e,n),t=new THREE.BufferAttribute(e,i),t.needsUpdate=!0,t):(s(e,t.array),t.needsUpdate=!0,null)}function a(t,e,i){if(t.itemSize!==i)return!0;if(!t.array)return!0;var n=t.array.length;return Array.isArray(e)&&Array.isArray(e[0])?n!==e.length*i:n!==e.length}var s=t("flatten-vertex-data");e.exports.attr=o,e.exports.index=n},{"flatten-vertex-data":32}],32:[function(t,e,i){function n(t,e,i){if(!t)throw new TypeError("must specify data as first parameter");if(i=0|+(i||0),Array.isArray(t)&&Array.isArray(t[0])){var n=t[0].length,r=t.length*n;e&&"string"!=typeof e||(e=new(o(e||"float32"))(r+i));var a=e.length-i;if(r!==a)throw new Error("source length "+r+" ("+n+"x"+t.length+") does not match destination length "+a);for(var s=0,h=i;s<t.length;s++)for(var c=0;n>c;c++)e[h++]=t[s][c]}else if(e&&"string"!=typeof e)e.set(t,i);else{var u=o(e||"float32");0===i?e=new u(t):(e=new u(t.length+i),e.set(t,i))}return e}var o=t("dtype");e.exports=n},{dtype:33}],33:[function(t,e,i){arguments[4][29][0].apply(i,arguments)},{dup:29}],34:[function(t,e,i){var n=t("object-assign");e.exports=function(t){t=t||{};var e="number"==typeof t.opacity?t.opacity:1,i="number"==typeof t.alphaTest?t.alphaTest:1e-4,o=t.precision||"highp",r=t.color,a=t.map;return delete t.map,delete t.color,delete t.precision,delete t.opacity,n({uniforms:{opacity:{type:"f",value:e},map:{type:"t",value:a||new THREE.Texture},color:{type:"c",value:new THREE.Color(r)}},vertexShader:["attribute vec2 uv;","attribute vec4 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * position;","}"].join("\n"),fragmentShader:["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives : enable","#endif","precision "+o+" float;","uniform float opacity;","uniform vec3 color;","uniform sampler2D map;","varying vec2 vUv;","float aastep(float value) {","  #ifdef GL_OES_standard_derivatives","    float afwidth = length(vec2(dFdx(value), dFdy(value))) * 0.70710678118654757;","  #else","    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));","  #endif","  return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);","}","void main() {","  vec4 texColor = texture2D(map, vUv);","  float alpha = aastep(texColor.a);","  gl_FragColor = vec4(color, opacity * alpha);",0===i?"":"  if (gl_FragColor.a < "+i+") discard;","}"].join("\n")},t)}},{"object-assign":26}],35:[function(t,e,i){var n=t("load-bmfont");e.exports=function(t,e){n(t.font,function(i,n){if(i)throw i;PANOLENS.Utils.TextureLoader.load(t.image,function(t){e(n,t)})})}},{"load-bmfont":10}],36:[function(t,e,i){var n=t("../"),o=t("../shaders/sdf");PANOLENS&&PANOLENS.Utils&&PANOLENS.SpriteText&&(PANOLENS.Utils.loadBMFont=function(e,i){t("./load")(e,PANOLENS.SpriteText.prototype.setBMFont.bind(PANOLENS.SpriteText.prototype,i))},PANOLENS.SpriteText.prototype.generateTextGeometry=n,PANOLENS.SpriteText.prototype.generateSDFShader=o)},{"../":1,"../shaders/sdf":34,"./load":35}],37:[function(t,e,i){(function(e){"use strict";function n(){try{var t=new Uint8Array(1);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function o(){return r.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(t){return this instanceof r?(r.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof t?a(this,t):"string"==typeof t?s(this,t,arguments.length>1?arguments[1]:"utf8"):h(this,t)):arguments.length>1?new r(t,arguments[1]):new r(t)}function a(t,e){if(t=E(t,0>e?0:0|m(e)),!r.TYPED_ARRAY_SUPPORT)for(var i=0;e>i;i++)t[i]=0;return t}function s(t,e,i){("string"!=typeof i||""===i)&&(i="utf8");var n=0|y(e,i);return t=E(t,n),t.write(e,i),t}function h(t,e){if(r.isBuffer(e))return c(t,e);if(J(e))return u(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(e.buffer instanceof ArrayBuffer)return l(t,e);if(e instanceof ArrayBuffer)return d(t,e)}return e.length?p(t,e):f(t,e)}function c(t,e){var i=0|m(e.length);return t=E(t,i),e.copy(t,0,0,i),t}function u(t,e){var i=0|m(e.length);t=E(t,i);for(var n=0;i>n;n+=1)t[n]=255&e[n];return t}function l(t,e){var i=0|m(e.length);t=E(t,i);for(var n=0;i>n;n+=1)t[n]=255&e[n];return t}function d(t,e){return r.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=r.prototype):t=l(t,new Uint8Array(e)),t}function p(t,e){var i=0|m(e.length);t=E(t,i);for(var n=0;i>n;n+=1)t[n]=255&e[n];return t}function f(t,e){var i,n=0;"Buffer"===e.type&&J(e.data)&&(i=e.data,n=0|m(i.length)),t=E(t,n);for(var o=0;n>o;o+=1)t[o]=255&i[o];return t}function E(t,e){r.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=r.prototype):t.length=e;var i=0!==e&&e<=r.poolSize>>>1;return i&&(t.parent=q),t}function m(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function g(t,e){if(!(this instanceof g))return new g(t,e);var i=new r(t,e);return delete i.parent,i}function y(t,e){"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return i;case"utf8":case"utf-8":return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Y(t).length;default:if(n)return G(t).length;e=(""+e).toLowerCase(),n=!0}}function v(t,e,i){var n=!1;if(e=0|e,i=void 0===i||i===1/0?this.length:0|i,t||(t="utf8"),0>e&&(e=0),i>this.length&&(i=this.length),e>=i)return"";for(;;)switch(t){case"hex":return R(this,e,i);case"utf8":case"utf-8":return O(this,e,i);case"ascii":return I(this,e,i);case"binary":return P(this,e,i);case"base64":return T(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function A(t,e,i,n){i=Number(i)||0;var o=t.length-i;n?(n=Number(n),n>o&&(n=o)):n=o;var r=e.length;if(r%2!==0)throw new Error("Invalid hex string");n>r/2&&(n=r/2);for(var a=0;n>a;a++){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");t[i+a]=s}return a}function N(t,e,i,n){return F(G(e,t.length-i),t,i,n)}function w(t,e,i,n){return F(_(e),t,i,n)}function L(t,e,i,n){return w(t,e,i,n)}function M(t,e,i,n){return F(Y(e),t,i,n)}function b(t,e,i,n){return F(Z(e,t.length-i),t,i,n)}function T(t,e,i){return 0===e&&i===t.length?Q.fromByteArray(t):Q.fromByteArray(t.slice(e,i))}function O(t,e,i){i=Math.min(t.length,i);for(var n=[],o=e;i>o;){var r=t[o],a=null,s=r>239?4:r>223?3:r>191?2:1;if(i>=o+s){var h,c,u,l;switch(s){case 1:128>r&&(a=r);break;case 2:h=t[o+1],128===(192&h)&&(l=(31&r)<<6|63&h,l>127&&(a=l));break;case 3:h=t[o+1],c=t[o+2],128===(192&h)&&128===(192&c)&&(l=(15&r)<<12|(63&h)<<6|63&c,l>2047&&(55296>l||l>57343)&&(a=l));break;case 4:h=t[o+1],c=t[o+2],u=t[o+3],128===(192&h)&&128===(192&c)&&128===(192&u)&&(l=(15&r)<<18|(63&h)<<12|(63&c)<<6|63&u,l>65535&&1114112>l&&(a=l))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),o+=s}return S(n)}function S(t){var e=t.length;if(K>=e)return String.fromCharCode.apply(String,t);for(var i="",n=0;e>n;)i+=String.fromCharCode.apply(String,t.slice(n,n+=K));return i}function I(t,e,i){var n="";i=Math.min(t.length,i);for(var o=e;i>o;o++)n+=String.fromCharCode(127&t[o]);return n}function P(t,e,i){var n="";i=Math.min(t.length,i);for(var o=e;i>o;o++)n+=String.fromCharCode(t[o]);return n}function R(t,e,i){var n=t.length;(!e||0>e)&&(e=0),(!i||0>i||i>n)&&(i=n);for(var o="",r=e;i>r;r++)o+=W(t[r]);return o}function x(t,e,i){for(var n=t.slice(e,i),o="",r=0;r<n.length;r+=2)o+=String.fromCharCode(n[r]+256*n[r+1]);return o}function j(t,e,i){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,i,n,o,a){if(!r.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>o||a>e)throw new RangeError("value is out of bounds");if(i+n>t.length)throw new RangeError("index out of range")}function D(t,e,i,n){0>e&&(e=65535+e+1);for(var o=0,r=Math.min(t.length-i,2);r>o;o++)t[i+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function H(t,e,i,n){0>e&&(e=4294967295+e+1);for(var o=0,r=Math.min(t.length-i,4);r>o;o++)t[i+o]=e>>>8*(n?o:3-o)&255}function U(t,e,i,n,o,r){if(e>o||r>e)throw new RangeError("value is out of bounds");if(i+n>t.length)throw new RangeError("index out of range");if(0>i)throw new RangeError("index out of range")}function z(t,e,i,n,o){return o||U(t,e,i,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(t,e,i,n,23,4),i+4}function V(t,e,i,n,o){return o||U(t,e,i,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(t,e,i,n,52,8),i+8}function k(t){if(t=B(t).replace($,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function B(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function W(t){return 16>t?"0"+t.toString(16):t.toString(16)}function G(t,e){e=e||1/0;for(var i,n=t.length,o=null,r=[],a=0;n>a;a++){if(i=t.charCodeAt(a),i>55295&&57344>i){if(!o){if(i>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&r.push(239,191,189);continue}o=i;continue}if(56320>i){(e-=3)>-1&&r.push(239,191,189),o=i;continue}i=(o-55296<<10|i-56320)+65536}else o&&(e-=3)>-1&&r.push(239,191,189);if(o=null,128>i){if((e-=1)<0)break;r.push(i)}else if(2048>i){if((e-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(65536>i){if((e-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(1114112>i))throw new Error("Invalid code point");if((e-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function _(t){for(var e=[],i=0;i<t.length;i++)e.push(255&t.charCodeAt(i));return e}function Z(t,e){for(var i,n,o,r=[],a=0;a<t.length&&!((e-=2)<0);a++)i=t.charCodeAt(a),n=i>>8,o=i%256,r.push(o),r.push(n);return r}function Y(t){return Q.toByteArray(k(t))}function F(t,e,i,n){for(var o=0;n>o&&!(o+i>=e.length||o>=t.length);o++)e[o+i]=t[o];return o}var Q=t("base64-js"),X=t("ieee754"),J=t("isarray");i.Buffer=r,i.SlowBuffer=g,i.INSPECT_MAX_BYTES=50,r.poolSize=8192;var q={};r.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:n(),r.TYPED_ARRAY_SUPPORT?(r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array):(r.prototype.length=void 0,r.prototype.parent=void 0),r.isBuffer=function(t){return!(null==t||!t._isBuffer)},r.compare=function(t,e){if(!r.isBuffer(t)||!r.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,o=0,a=Math.min(i,n);a>o&&t[o]===e[o];)++o;return o!==a&&(i=t[o],n=e[o]),n>i?-1:i>n?1:0},r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(t,e){if(!J(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new r(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;i++)e+=t[i].length;var n=new r(e),o=0;for(i=0;i<t.length;i++){var a=t[i];a.copy(n,o),o+=a.length}return n},r.byteLength=y,r.prototype._isBuffer=!0,r.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):v.apply(this,arguments)},r.prototype.equals=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===r.compare(this,t)},r.prototype.inspect=function(){var t="",e=i.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},r.prototype.compare=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:r.compare(this,t)},r.prototype.indexOf=function(t,e){function i(t,e,i){for(var n=-1,o=0;i+o<t.length;o++)if(t[i+o]===e[-1===n?0:o-n]){if(-1===n&&(n=o),o-n+1===e.length)return i+n}else n=-1;return-1}if(e>2147483647?e=2147483647:-2147483648>e&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(0>e&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(r.isBuffer(t))return i(this,t,e);if("number"==typeof t)return r.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):i(this,[t],e);throw new TypeError("val must be string, number or Buffer")},r.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(i)?(i=0|i,void 0===n&&(n="utf8")):(n=i,i=void 0);else{var o=n;n=e,e=0|i,i=o}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(0>i||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return A(this,t,e,i);case"utf8":case"utf-8":return N(this,t,e,i);case"ascii":return w(this,t,e,i);case"binary":return L(this,t,e,i);case"base64":return M(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,t,e,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;r.prototype.slice=function(t,e){var i=this.length;t=~~t,e=void 0===e?i:~~e,0>t?(t+=i,0>t&&(t=0)):t>i&&(t=i),0>e?(e+=i,0>e&&(e=0)):e>i&&(e=i),t>e&&(e=t);var n;if(r.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=r.prototype;else{var o=e-t;n=new r(o,void 0);for(var a=0;o>a;a++)n[a]=this[a+t]}return n.length&&(n.parent=this.parent||this),n},r.prototype.readUIntLE=function(t,e,i){t=0|t,e=0|e,i||j(t,e,this.length);for(var n=this[t],o=1,r=0;++r<e&&(o*=256);)n+=this[t+r]*o;return n},r.prototype.readUIntBE=function(t,e,i){t=0|t,e=0|e,i||j(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},r.prototype.readUInt8=function(t,e){return e||j(t,1,this.length),this[t]},r.prototype.readUInt16LE=function(t,e){return e||j(t,2,this.length),this[t]|this[t+1]<<8},r.prototype.readUInt16BE=function(t,e){return e||j(t,2,this.length),this[t]<<8|this[t+1]},r.prototype.readUInt32LE=function(t,e){return e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},r.prototype.readUInt32BE=function(t,e){return e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},r.prototype.readIntLE=function(t,e,i){t=0|t,e=0|e,i||j(t,e,this.length);for(var n=this[t],o=1,r=0;++r<e&&(o*=256);)n+=this[t+r]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*e)),n},r.prototype.readIntBE=function(t,e,i){t=0|t,e=0|e,i||j(t,e,this.length);for(var n=e,o=1,r=this[t+--n];n>0&&(o*=256);)r+=this[t+--n]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},r.prototype.readInt8=function(t,e){return e||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},r.prototype.readInt16LE=function(t,e){e||j(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},r.prototype.readInt16BE=function(t,e){e||j(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},r.prototype.readInt32LE=function(t,e){return e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},r.prototype.readInt32BE=function(t,e){return e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},r.prototype.readFloatLE=function(t,e){return e||j(t,4,this.length),X.read(this,t,!0,23,4)},r.prototype.readFloatBE=function(t,e){return e||j(t,4,this.length),X.read(this,t,!1,23,4)},r.prototype.readDoubleLE=function(t,e){return e||j(t,8,this.length),X.read(this,t,!0,52,8)},r.prototype.readDoubleBE=function(t,e){return e||j(t,8,this.length),X.read(this,t,!1,52,8)},r.prototype.writeUIntLE=function(t,e,i,n){t=+t,e=0|e,i=0|i,n||C(this,t,e,i,Math.pow(2,8*i),0);var o=1,r=0;for(this[e]=255&t;++r<i&&(o*=256);)this[e+r]=t/o&255;return e+i},r.prototype.writeUIntBE=function(t,e,i,n){t=+t,e=0|e,
i=0|i,n||C(this,t,e,i,Math.pow(2,8*i),0);var o=i-1,r=1;for(this[e+o]=255&t;--o>=0&&(r*=256);)this[e+o]=t/r&255;return e+i},r.prototype.writeUInt8=function(t,e,i){return t=+t,e=0|e,i||C(this,t,e,1,255,0),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},r.prototype.writeUInt16LE=function(t,e,i){return t=+t,e=0|e,i||C(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},r.prototype.writeUInt16BE=function(t,e,i){return t=+t,e=0|e,i||C(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},r.prototype.writeUInt32LE=function(t,e,i){return t=+t,e=0|e,i||C(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):H(this,t,e,!0),e+4},r.prototype.writeUInt32BE=function(t,e,i){return t=+t,e=0|e,i||C(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):H(this,t,e,!1),e+4},r.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e=0|e,!n){var o=Math.pow(2,8*i-1);C(this,t,e,i,o-1,-o)}var r=0,a=1,s=0>t?1:0;for(this[e]=255&t;++r<i&&(a*=256);)this[e+r]=(t/a>>0)-s&255;return e+i},r.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e=0|e,!n){var o=Math.pow(2,8*i-1);C(this,t,e,i,o-1,-o)}var r=i-1,a=1,s=0>t?1:0;for(this[e+r]=255&t;--r>=0&&(a*=256);)this[e+r]=(t/a>>0)-s&255;return e+i},r.prototype.writeInt8=function(t,e,i){return t=+t,e=0|e,i||C(this,t,e,1,127,-128),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=255&t,e+1},r.prototype.writeInt16LE=function(t,e,i){return t=+t,e=0|e,i||C(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},r.prototype.writeInt16BE=function(t,e,i){return t=+t,e=0|e,i||C(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},r.prototype.writeInt32LE=function(t,e,i){return t=+t,e=0|e,i||C(this,t,e,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):H(this,t,e,!0),e+4},r.prototype.writeInt32BE=function(t,e,i){return t=+t,e=0|e,i||C(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):H(this,t,e,!1),e+4},r.prototype.writeFloatLE=function(t,e,i){return z(this,t,e,!0,i)},r.prototype.writeFloatBE=function(t,e,i){return z(this,t,e,!1,i)},r.prototype.writeDoubleLE=function(t,e,i){return V(this,t,e,!0,i)},r.prototype.writeDoubleBE=function(t,e,i){return V(this,t,e,!1,i)},r.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&i>n&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var o,a=n-i;if(this===t&&e>i&&n>e)for(o=a-1;o>=0;o--)t[o+e]=this[o+i];else if(1e3>a||!r.TYPED_ARRAY_SUPPORT)for(o=0;a>o;o++)t[o+e]=this[o+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+a),e);return a},r.prototype.fill=function(t,e,i){if(t||(t=0),e||(e=0),i||(i=this.length),e>i)throw new RangeError("end < start");if(i!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>i||i>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;i>n;n++)this[n]=t;else{var o=G(t.toString()),r=o.length;for(n=e;i>n;n++)this[n]=o[n%r]}return this}};var $=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":38,ieee754:39,isarray:40}],38:[function(t,e,i){!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===a||e===l?62:e===s||e===d?63:h>e?-1:h+10>e?e-h+26+26:u+26>e?e-u:c+26>e?e-c+26:void 0}function i(t){function i(t){c[l++]=t}var n,o,a,s,h,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;h="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,c=new r(3*t.length/4-h),a=h>0?t.length-4:t.length;var l=0;for(n=0,o=0;a>n;n+=4,o+=3)s=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),i((16711680&s)>>16),i((65280&s)>>8),i(255&s);return 2===h?(s=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,i(255&s)):1===h&&(s=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,i(s>>8&255),i(255&s)),c}function n(t){function e(t){return o.charAt(t)}function i(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var n,r,a,s=t.length%3,h="";for(n=0,a=t.length-s;a>n;n+=3)r=(t[n]<<16)+(t[n+1]<<8)+t[n+2],h+=i(r);switch(s){case 1:r=t[t.length-1],h+=e(r>>2),h+=e(r<<4&63),h+="==";break;case 2:r=(t[t.length-2]<<8)+t[t.length-1],h+=e(r>>10),h+=e(r>>4&63),h+=e(r<<2&63),h+="="}return h}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),h="0".charCodeAt(0),c="a".charCodeAt(0),u="A".charCodeAt(0),l="-".charCodeAt(0),d="_".charCodeAt(0);t.toByteArray=i,t.fromByteArray=n}("undefined"==typeof i?this.base64js={}:i)},{}],39:[function(t,e,i){i.read=function(t,e,i,n,o){var r,a,s=8*o-n-1,h=(1<<s)-1,c=h>>1,u=-7,l=i?o-1:0,d=i?-1:1,p=t[e+l];for(l+=d,r=p&(1<<-u)-1,p>>=-u,u+=s;u>0;r=256*r+t[e+l],l+=d,u-=8);for(a=r&(1<<-u)-1,r>>=-u,u+=n;u>0;a=256*a+t[e+l],l+=d,u-=8);if(0===r)r=1-c;else{if(r===h)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,n),r-=c}return(p?-1:1)*a*Math.pow(2,r-n)},i.write=function(t,e,i,n,o,r){var a,s,h,c=8*r-o-1,u=(1<<c)-1,l=u>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:r-1,f=n?1:-1,E=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-a))<1&&(a--,h*=2),e+=a+l>=1?d/h:d*Math.pow(2,1-l),e*h>=2&&(a++,h/=2),a+l>=u?(s=0,a=u):a+l>=1?(s=(e*h-1)*Math.pow(2,o),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;t[i+p]=255&s,p+=f,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;t[i+p]=255&a,p+=f,a/=256,c-=8);t[i+p-f]|=128*E}},{}],40:[function(t,e,i){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}]},{},[36]);